<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>HDU 1003 Max sumâ€”â€”åˆ†æ²»æ³•çš„åº”ç”¨ï¼ŒåŠ¨æ€è§„åˆ’ï¼Œå‰ç¼€æ•°ç»„ | imlk's blog</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel=stylesheet></head><body><header class=header><a class=logo href=/>imlk's Blog</a><nav><ul class=menu><li><a href=/>ğŸ Home</a></li><li><a href=/about/>ğŸ‘‹About</a></li><li><a href=/archives/>ğŸ“œArchives</a></li><li><a href=/friends/>ğŸ”—Friends</a></li><li><a href=/dn42/>ğŸ•¸ï¸DN42</a></li><li><a href=/index.xml>ğŸ“¢Subscribe</a></li></ul></nav></header><hr><div class=article-meta><h1><span class=title>HDU 1003 Max sumâ€”â€”åˆ†æ²»æ³•çš„åº”ç”¨ï¼ŒåŠ¨æ€è§„åˆ’ï¼Œå‰ç¼€æ•°ç»„</span></h1><span><span class=date>2017-12-06</span>
<span class=date>(æ›´æ–°äº2021-10-10)</span>
/
<span class=cats><a href=https://blog.imlk.top/categories/algorithm/>Algorithm</a></span>
/
<span class=tags><a href=https://blog.imlk.top/tags/hdu/>#HDU</a>
<a href=https://blog.imlk.top/tags/%E5%88%86%E6%B2%BB%E6%B3%95/>#åˆ†æ²»æ³•</a></span></span><br></div><main><p>åŸé¢˜ï¼š <a href="http://acm.hdu.edu.cn/showproblem.php?pid=1003">http://acm.hdu.edu.cn/showproblem.php?pid=1003</a></p><p>çœ‹åˆ°è¿™é¢˜çš„æ—¶å€™ä¸€è„¸æ‡µé€¼ï¼Œç½‘ä¸Šå¯»æ‰¾è§£ç­”ï¼Œå‘ç°éƒ½è®²çš„ä¸è¯¦ç»†ï¼Œå˜é‡å£°æ˜ä¹Ÿå¾ˆçŸ­ï¼Œæ ¹æœ¬çœ‹ä¸å‡ºæ˜¯ä»€ä¹ˆç”¨é€”ï¼Œè¿™é‡Œç»™å‡ºäº†æˆ‘çš„è§£ç­”ï¼Œå‚è€ƒäº†ç½‘ä¸Šå„ä½å¤§ç¥çš„æ–¹æ³•ï¼ŒåŠ ä¸Šäº†æ³¨é‡Šï¼Œæ–¹ä¾¿å­¦ä¹ ã€‚</p><p>##<strong>0x00 åˆ†æ²»æ³•è§£é¢˜</strong></p><pre tabindex=0><code>#include &lt;stdio.h&gt;

struct Sequence
{
	//è¡¨ç¤ºä¸€ä¸ªæ•°ç»„

	int sum;//æ•°ç»„å…ƒç´ ä¹‹å’Œ
	int leftPosition;//æ•°ç»„å·¦è¾¹ç•Œä½ç½®
	int rightPosition;//æ•°ç»„å³è¾¹ç•Œä½ç½®
};

/*
	æ±‚æœ€å¤§å­åˆ—ï¼š

	é¦–å…ˆæ˜ç¡®ï¼š
		ç»™å®šä¸€ä¸ªæ•°åˆ—
		å…¶æœ€å¤§å­åˆ—çš„èŒƒå›´ï¼Œè¦ä¹ˆåŒ…æ‹¬æ­£ä¸­é—´çš„ä½ç½®ï¼Œè¦ä¹ˆå…¨åœ¨æœ€ä¸­é—´ä½ç½®çš„å·¦è¾¹ï¼Œè¦ä¹ˆå…¨åœ¨æœ€ä¸­é—´ä½ç½®çš„å³è¾¹
		è¿™ä¸‰ç§æƒ…å†µåœ¨è¿­ä»£å‡½æ•°ä¸­åˆ†åˆ«å¤„ç†
*/

struct Sequence getMaxSequence(int * sourceSequence, int leftPosition, int rightPosition) {

	// printf(&#34;intoï¼š %d, %d\n&#34;,leftPosition,rightPosition);
	int mediumPosition;

	//èŒƒå›´ï¼š[leftPosition, rightPosition]
	if (leftPosition == rightPosition) {
		//ç»™å®šèŒƒå›´å†…çš„å­æ•°åˆ—åªæœ‰ä¸€ä¸ªå…ƒç´ ,æ„é€ ä¸€ä¸ªstruct sequenceæ¥æè¿°;
		struct Sequence sequence;
		sequence.leftPosition = leftPosition;

		sequence.rightPosition = rightPosition;
		sequence.sum = sourceSequence[leftPosition];
		// printf(&#34;return: %d, %d\n&#34;,sequence.leftPosition,sequence.rightPosition);

		return sequence;
		    //å°†è¿™ä¸ªå…ƒç´ è¿”å›
	}

	//å–å¾—ä¸­é—´ä½ç½®
	mediumPosition = (leftPosition + rightPosition) / 2;

	//æ„é€ ä¸‰ç§structæ¥ä¿å­˜ä¸‰ç§æƒ…å†µçš„è¿”å›å€¼ï¼›
	struct Sequence leftSequence;
	struct Sequence rightSequence;
	struct Sequence aroundSequence;

	leftSequence = getMaxSequence(sourceSequence, leftPosition, mediumPosition);

	rightSequence = getMaxSequence(sourceSequence, mediumPosition + 1, rightPosition);

	//ç¬¬ä¸‰ç§æƒ…å†µä¸‹ï¼Œå…ˆä»ä¸­é—´å‘å·¦è¾¹æŸ¥æ‰¾æ‰¾å‡ºæœ€å¤§çš„å’Œï¼Œå†ä»ä¸­é—´å‘å³è¾¹æŸ¥æ‰¾æ‰¾å‡ºæœ€å¤§çš„å’Œï¼Œç›¸åŠ å¾—åˆ°æ¨ªè·¨ä¸­é—´ä½ç½®çš„æœ€å¤§å€¼åŠèŒƒå›´
	//å…ˆæ˜¯å·¦è¾¹
	//å…ˆä¿å­˜å‘å·¦è¾¹å‡ºå‘é‡åˆ°çš„ç¬¬ä¸€ä¸ªå€¼
	int leftMaxSumTmp = sourceSequence[mediumPosition];
	//å¹¶ä¿å­˜è¯¥å€¼çš„ä½ç½®
	aroundSequence.leftPosition = mediumPosition;

	int leftSumTmp = 0;
	for (int index = mediumPosition; index &gt;= leftPosition; index--) {
		leftSumTmp = leftSumTmp + sourceSequence[index];
		if (leftSumTmp &gt;= leftMaxSumTmp) {
			//å¦‚æœå‘ç°ä»ä¸­é—´åˆ°å·¦è¾¹æŸä¸€é¡¹çš„æ‰€æœ‰å€¼ä¹‹å’Œæ¯”leftMaxSumTmpæ›´å¤§äº†,å°±æ›´æ–°leftMaxSumTmp
			//å¹¶è®°å½•æ­¤ä½ç½®åˆ°aroundSequenceçš„leftPositionå­—æ®µ
			leftMaxSumTmp = leftSumTmp;
			aroundSequence.leftPosition = index;
		}

	}
	//å†æ˜¯å³è¾¹
	//å…ˆä¿å­˜å‘å³è¾¹å‡ºå‘é‡åˆ°çš„ç¬¬ä¸€ä¸ªå€¼(å› ä¸ºåˆ°è¿™é‡ŒleftPositionå’ŒrightPositionä¸ç›¸ç­‰æ‰€ä»¥meiumPosition + 1ï¼ˆä¸€å®šå°äºç­‰äºrightPositionï¼‰ä¸€å®šæ²¡æœ‰è¶…è¿‡èŒƒå›´ï¼š[leftPosition, rightPosition])ï¼Œä¸åŠ if
	int rightMaxSumTmp = sourceSequence[mediumPosition + 1];
	//ä¿å­˜è¯¥å€¼çš„ä½ç½®
	aroundSequence.rightPosition = mediumPosition + 1;

	int rightSumTmp = 0;
	for (int index = mediumPosition + 1; index &lt;= rightPosition; index++) {
		rightSumTmp = rightSumTmp + sourceSequence[index];
		if (rightSumTmp &gt;= rightMaxSumTmp) {
			//å¦‚æœå‘ç°ä»ä¸­é—´åˆ°å³è¾¹æŸä¸€é¡¹çš„æ‰€æœ‰å€¼ä¹‹å’Œæ¯”rightMaxSumTmpæ›´å¤§äº†,å°±æ›´æ–°rightMaxSumTmp
			//å¹¶è®°å½•æ­¤ä½ç½®åˆ°aroundSequenceçš„rightPositionå­—æ®µ
			rightMaxSumTmp = rightSumTmp;
			aroundSequence.rightPosition = index;
		}

	}

	aroundSequence.sum = leftMaxSumTmp + rightMaxSumTmp;

	//ä¸‰é€‰ä¸€è¿”å›ï¼Œé€‰sumæœ€é•¿çš„é‚£ä¸ªè¿”å›

	// printf(&#34;return: %d, %d\n&#34;,finalSequence.leftPosition,finalSequence.rightPosition);
	return (leftSequence.sum &gt; rightSequence.sum) ? ((leftSequence.sum &gt; aroundSequence.sum) ? leftSequence : aroundSequence) : ((rightSequence.sum &gt; aroundSequence.sum) ? rightSequence : aroundSequence);

}
int main() {
	int numOfCase , indexOfCase = 1,lengthOfSquence;
	scanf(&#34;%d&#34;, &amp;numOfCase);
	while (indexOfCase &lt;= numOfCase) {
		scanf(&#34;%d&#34;,&amp;lengthOfSquence);
		int sourceSequence[100000];
		for(int index = 0;index &lt;lengthOfSquence;index++){
			scanf(&#34;%d&#34;,sourceSequence + index); 
		}
		struct Sequence aimSequence =  getMaxSequence(sourceSequence,0,lengthOfSquence - 1);
		printf(&#34;Case %d:\n%d %d %d\n&#34;, indexOfCase ,aimSequence.sum,aimSequence.leftPosition + 1,aimSequence.rightPosition + 1);
		if(indexOfCase != numOfCase){
			printf(&#34;\n&#34;);
		}
		indexOfCase++;
	}

	return 0;
}
</code></pre><p>å¯’å‡çœ‹åˆ°è¿™æ ·ä¸€ç¯‡æ–‡ç« ï¼Œè®²çš„å¾ˆè¯¦ç»†
<a href=http://conw.net/archives/9/#comment-25>http://conw.net/archives/9/#comment-25</a></p><p>##<strong>0x01 åŠ¨æ€è§„åˆ’</strong></p><pre tabindex=0><code>#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;

#define iinf 1e9

using namespace std;

// O(n)AC

// åŠ¨æ€è§„åˆ’
// åŸå…ˆç»´æŠ¤ä¸€ä¸ªdpæ•°ç»„ï¼Œdp[i]ä¿å­˜ä»¥ç¬¬iä¸ªä½å­ç»“å°¾çš„æ‰€æœ‰å­åˆ—çš„æœ€å¤§å’Œ
// dp[i] = list[i] + max(dp[i - 1], 0);
// è‡ªå¤„çœç•¥è¿™ä¸ªæ•°ç»„ï¼Œç”¨ä¸¤ä¸ªå˜é‡æ¥å®ç°

int main(int argc, char const *argv[])
{

	int T, N, last, now, ans, startpos, l, r;
	scanf(&#34;%d&#34;, &amp;T);
	for (int j = 1; j &lt;= T; j++) {
		last = -1;
		ans = -iinf;
		l = 1;
		r = 1;
		scanf(&#34;%d&#34;, &amp;N);

		for (int i = 1; i &lt;= N; i++) {
			scanf(&#34;%d&#34;, &amp;now);
			if (last &gt;= 0) {
				last = now + last;

			} else {
				last = now;
				startpos = i;

			}

			if (last &gt; ans) {
				ans = last;
				l = startpos;
				r = i;
			}

		}

		if (j == 1) {
			printf(&#34;Case 1:\n&#34;);
		} else {
			printf(&#34;\nCase %d:\n&#34;, j);
		}

		printf(&#34;%d %d %d\n&#34;, ans, l, r);

	}

	return 0;
}
</code></pre><p>##<strong>0x02 ç»“åˆä¼˜åŒ–åçš„å‰ç¼€æ•°ç»„</strong></p><p>ç”¨è¿™ç§ç”¨æ³•çš„äººä¼¼ä¹æ›´å¤š</p><pre tabindex=0><code>#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;

#define iinf 1e9

using namespace std;

// O(n)AC

// å¦ä¸€ç§ç»“åˆå‰ç¼€æ•°ç»„çš„æ–¹æ³•
// data[i] = list[0...(i - 1)];
// dataæ•°ç»„ä»1å¼€å§‹é¿å…å¯¹è¾¹ç•Œçš„åˆ¤æ–­
// åˆ™list[x...y] = data[y + 1] - data[x];
// iä½œä¸ºå¾ªç¯å˜é‡
// ç»´æŠ¤data[i]çš„æœ€å°å€¼miï¼Œæ›´æ–°ansçš„æœ€å¤§å€¼
// mi = min(mi, data[i])
// ans = max(data[i] - mi, ans)
// å¯çŸ¥è‹¥ä»¥ç¬¬yä¸ªå…ƒç´ ç»“å°¾çš„æ‰€æœ‰å­åˆ—ä¸­list[x...y]ä¸ºæœ€ä¼˜è§£ï¼Œé‚£ä¹ˆdata[x]ä¸€å®šæ˜¯data[1],data[2],data[3]...data[y](æ³¨æ„è¿™é‡Œæ²¡æœ‰data[y+1],å› ä¸ºè‡³å°‘è¦æœ‰ä¸€ä¸ªå…ƒç´ )ä¸­çš„æœ€å°å€¼

int main(int argc, char const *argv[])
{

	int T, N, sum, now, ans, min, minpos, l, r;
	scanf(&#34;%d&#34;, &amp;T);
	for (int j = 1; j &lt;= T; j++) {
		sum = 0;
		ans = -iinf;
		min = 0;
		minpos = 0;
		l = 1;
		r = 1;
		scanf(&#34;%d&#34;, &amp;N);

		for (int i = 1; i &lt;= N; i++) {
			scanf(&#34;%d&#34;, &amp;now);
			sum += now;
			if (sum - min &gt; ans) {//æ›´æ–°ç­”æ¡ˆï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ä¸Šä¸€æ¬¡å¾ªç¯çš„minå€¼
				r = i;
				l = minpos + 1;
				ans = sum - min;
			}
			if (sum &lt; min) {//è¯¥åˆ¤æ–­è¯­å¥ä¸å¯å’Œä¸Šä¸€å¥è°ƒæ¢ï¼Œå¦åˆ™å°†å¯èƒ½å‡ºç°æœ€ä¼˜è§£çš„æ•°åˆ—é•¿åº¦ä¸º0ï¼›
				min = sum;//æ›´æ–°æœ¬æ¬¡å¾ªç¯çš„minï¼Œä¸ºåœ¨ä¸‹ä¸€å¾ªç¯ä¸­ä½¿ç”¨åˆ°
				minpos = i;
			}
		}

		if (j == 1) {
			printf(&#34;Case 1:\n&#34;);
		} else {
			printf(&#34;\nCase %d:\n&#34;, j);
		}

		printf(&#34;%d %d %d\n&#34;, ans, l, r);

	}

	return 0;
}
</code></pre></main><div id=comments><hr><script src=https://utteranc.es/client.js repo=KB5201314/KB5201314.github.io issue-term=pathname label='ğŸ’¬ comments ğŸ’¬' theme=github-light crossorigin=anonymous async></script></div><footer><hr>Â© imlk 2017 &ndash; 2021 | <a href=https://blog.imlk.top>imlk's blog</a> | <a href=https://github.com/KB5201314/>Github</a> | <a href=mailto:me@imlk.top>Email</a> | <a href=https://beian.miit.gov.cn/>äº¬ICPå¤‡ - 2020042968å·</a></footer></body></html>