<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Codeforces Contest 1009 E. Intercity Travelling | imlk's blog</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel=stylesheet></head><body><header class=header><a class=logo href=/>imlk's Blog</a><nav><ul class=menu><li><a href=/>ğŸ Home</a></li><li><a href=/about/>ğŸ‘‹About</a></li><li><a href=/archives/>ğŸ“œArchives</a></li><li><a href=/friends/>ğŸ”—Friends</a></li><li><a href=/dn42/>ğŸ•¸ï¸DN42</a></li><li><a href=/index.xml>ğŸ“¢Subscribe</a></li></ul></nav></header><hr><div class=article-meta><h1><span class=title>Codeforces Contest 1009 E. Intercity Travelling</span></h1><span><span class=date>ğŸ“… 2018-07-15</span>
<span class=date>(æ›´æ–°äº2021-10-10)</span>
/
<span class=cats>ğŸ“š
<a href=https://blog.imlk.top/categories/algorithm/>Algorithm</a></span>
/
<span class=tags>ğŸ·ï¸
<a href=https://blog.imlk.top/tags/codeforces/>#Codeforces</a></span></span><br></div><main class=post-content><h3 id=é“¾æ¥>é“¾æ¥</h3><p>Educational Codeforces Round 47 (Rated for Div. 2) - E. Intercity Travelling
<a href=http://codeforces.com/contest/1009/problem/E>http://codeforces.com/contest/1009/problem/E</a></p><h3 id=æ€è·¯>æ€è·¯</h3><p>nåƒç±³ï¼Œæœ‰næ®µè·¯ï¼Œå…±æœ‰n-1ä¸ªå¯èƒ½å¯ä»¥ä¼‘æ¯çš„åœ°æ–¹ï¼Œåˆ™å…±æœ‰2^(n-1)ç§å¯èƒ½çš„ä¼‘æ¯æ–¹å¼;
è¦è®¡ç®— pâ‹…2^(nâˆ’1)ï¼Œä¹Ÿå°±æ˜¯è®¡ç®—æ‰€æœ‰çš„å¯èƒ½çš„ä¼‘æ¯æ–¹å¼ä¸‹çš„æ¶ˆè€—ä¹‹å’Œ;
åˆ†è§£å‡ºæ¥ï¼Œå°±æ˜¯è¦è®¡ç®—æ‰€æœ‰çš„å¯èƒ½çš„ä¼‘æ¯æ–¹å¼ä¸­æ‰€æœ‰çš„a[i]çš„å’Œ;
ä¹Ÿå°±æ˜¯æ±‚å’Œ sum(a[i] * æ¶ˆè€—a[i]å‡ºç°çš„æ€»æ¬¡æ•°) (i->1,2,3,&mldr;n);</p><p>æˆ‘ä»¬å¯ä»¥æŒ‰ç…§è¿™ç§æ€è·¯ï¼Œç»Ÿè®¡a[1]å‡ºç°çš„æ€»æ¬¡æ•°ï¼Œa[2]å‡ºç°çš„æ¬¡æ•°ï¼Œè¿™ä¸ªåº”è¯¥æ˜¯æœ‰è§„å¾‹çš„;</p><pre tabindex=0><code>ä¾‹å¦‚n=4çš„æƒ…å†µ

0  1  2  3  4
#--#--#--#--#
å…¶ä¸­ 1,2,3 è¿™å‡ ä¸ªç‚¹æ—¢å¯ä»¥æ˜¯ä¼‘æ¯ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸ä¼‘æ¯ä¸¤ç§çŠ¶æ€
</code></pre><p>å…ˆè€ƒè™‘ç®€å•çš„ï¼Œè¦ä½¿a[1]å‡ºç°:</p><pre tabindex=0><code>è‹¥a[1]å‡ºç°åœ¨ 0-1 ä¹‹é—´ï¼Œæ˜¾ç„¶è¿™æ˜¯å¿…å®šçš„ï¼Œå’Œ 1,2,3 ä¼‘æ¯ä¸ä¸ä¼‘æ¯éƒ½æ²¡å…³ç³»ï¼Œæœ‰æ‰€ä»¥åœ¨ 0-1 å‡ºç°a[1]çš„æ¬¡æ•°æ˜¯ 2^3 = 2^(n-1) æ¬¡
è‹¥a[1]å‡ºç°åœ¨ 1-2 ä¹‹é—´ï¼Œåˆ™å¿…é¡»æ˜¯åœ¨ 1 ç‚¹å¤„ä¼‘æ¯äº†ï¼Œè€Œ 2ï¼Œ3 å¤„åˆ™æ²¡å…³ç³»ï¼Œé‚£ä¹ˆæ‰€æœ‰åœ¨ 1-2 å‡ºç°a[1]çš„æ¬¡æ•°æ˜¯ 2^2 = 2^0 * 2^(n-2) = 2^(n-2) æ¬¡
è‹¥a[1]å‡ºç°åœ¨ 2-3 ä¹‹é—´ï¼Œåˆ™å¿…é¡»æ˜¯åœ¨ 2 ç‚¹ä¼‘æ¯äº†ï¼Œå’Œåœ¨ 1ï¼Œ3 çš„çŠ¶å†µæ²¡å…³ç³»ï¼Œé‚£ä¹ˆæ‰€æœ‰åœ¨ 2-3 å‡ºç°a[1]çš„æ¬¡æ•°æ˜¯ 2^2 = 2^1 * 2^(n-3) = 2^(n-2) æ¬¡
åŒç†å¯å¾—a[1]å‡ºç°åœ¨ 3-4 ä¹‹é—´çš„æ¬¡æ•°æ˜¯ 2^2 = 2^2 * 2^(n-4) = 2^(n-2) æ¬¡

åˆ™a[1]å‡ºç°çš„æ€»æ¬¡æ•°æ˜¯ 2^3 + 2^2 + 2^2 + 2^2
</code></pre><p>å†è€ƒè™‘a[2],a[3],a[4]çš„æƒ…å†µï¼Œ
a[2]å‡ºç°çš„æ€»æ¬¡æ•°æ˜¯ 2^2 + 2^1 + 2^1
a[3]å‡ºç°çš„æ€»æ¬¡æ•°æ˜¯ 2^1 + 2^0
a[4]å‡ºç°çš„æ€»æ¬¡æ•°æ˜¯ 2^0</p><p>å¯ä»¥å‘ç°è§„å¾‹
<strong>a[i]å‡ºç°çš„æ¬¡æ•°æ˜¯ 2^(n-i) + 2^(n-i-1) * (n-i)</strong></p><p>ä¹˜ä»¥a[i]åŠ èµ·æ¥å°±æ˜¯ç­”æ¡ˆ</p><p>æ‹™åŠ£ä»£ç ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span><span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span><span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span><span style=color:#75715e>&lt;cstring&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span><span style=color:#75715e>&lt;algorithm&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>#define MOD 998244353
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> <span style=color:#66d9ef>namespace</span> std;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// næœ€å¤§ä¸º100000, n^2ç®—æ³•ä¸å¯å–
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> n;
</span></span><span style=display:flex><span><span style=color:#75715e>// long long an[1000005];
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>long</span> <span style=color:#66d9ef>long</span> _2n[<span style=color:#ae81ff>1000005</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>(<span style=color:#66d9ef>int</span> argc, <span style=color:#66d9ef>char</span> <span style=color:#66d9ef>const</span> <span style=color:#f92672>*</span>argv[]) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	scanf(<span style=color:#e6db74>&#34;%d&#34;</span>, <span style=color:#f92672>&amp;</span>n);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	_2n[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>int</span> b <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; i <span style=color:#f92672>&lt;</span> n; <span style=color:#f92672>++</span>i) {
</span></span><span style=display:flex><span>		b <span style=color:#f92672>=</span> (b <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>) <span style=color:#f92672>%</span> MOD;
</span></span><span style=display:flex><span>		_2n[i] <span style=color:#f92672>=</span> b;
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>long</span> <span style=color:#66d9ef>long</span> a;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>long</span> <span style=color:#66d9ef>long</span> ans <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; i <span style=color:#f92672>&lt;=</span> n; <span style=color:#f92672>++</span>i) {
</span></span><span style=display:flex><span>		scanf(<span style=color:#e6db74>&#34;%lld&#34;</span>, <span style=color:#f92672>&amp;</span>a);
</span></span><span style=display:flex><span>		ans <span style=color:#f92672>=</span> (ans <span style=color:#f92672>+</span> ((_2n[n <span style=color:#f92672>-</span> i] <span style=color:#f92672>+</span> ((n <span style=color:#f92672>-</span> i) <span style=color:#f92672>*</span> _2n[n <span style=color:#f92672>-</span> i <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>]) <span style=color:#f92672>%</span> MOD) <span style=color:#f92672>*</span> a) <span style=color:#f92672>%</span> MOD) <span style=color:#f92672>%</span> MOD;
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	printf(<span style=color:#e6db74>&#34;%lld</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, ans);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// TLæ—§ä»£ç 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// for (int k = 1; k &lt;= n; ++k) {
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 	ans = (ans + ans) % MOD;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 	printf(&#34;x2\n&#34;);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 	for (int i = 1; i &lt; k; ++i) {
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 		ans = (ans + an[i] * _2n[k - i - 1]) % MOD;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 		printf(&#34;+a[%d] x 2^%d\n&#34;, i, k - i - 1);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 	}
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 	ans = (ans + an[k]) % MOD;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 	printf(&#34;+a[%d] x 2^0\n&#34;, k);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// }
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></main><div id=comments><hr><script src=https://utteranc.es/client.js repo=KB5201314/KB5201314.github.io issue-term=pathname label='ğŸ’¬ comments ğŸ’¬' theme=github-light crossorigin=anonymous async></script></div><footer class=footer><hr>Â© imlk 2017 &ndash; 2023 | <a href=https://blog.imlk.top>imlk's blog</a> | <a href=https://github.com/KB5201314/>Github</a> | <a href=mailto:me@imlk.top>Email</a> | <a href=https://beian.miit.gov.cn/>äº¬ICPå¤‡ - 2020042968å·</a></footer></body></html>