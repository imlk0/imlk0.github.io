<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>åœ¨AVD_7.1_x86 emulatorä¸Šå®‰è£…å¾®ä¿¡ | imlk's blog</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel=stylesheet></head><body><header class=header><a class=logo href=/>imlk's Blog</a><nav><ul class=menu><li><a href=/>ğŸ Home</a></li><li><a href=/about/>ğŸ‘‹About</a></li><li><a href=/archives/>ğŸ“œArchives</a></li><li><a href=/friends/>ğŸ”—Friends</a></li><li><a href=/dn42/>ğŸ•¸ï¸DN42</a></li><li><a href=/index.xml>ğŸ“¢Subscribe</a></li></ul></nav></header><hr><div class=article-meta><h1><span class=title>åœ¨AVD_7.1_x86 emulatorä¸Šå®‰è£…å¾®ä¿¡</span></h1><span><span class=date>ğŸ“… 2019-06-13</span>
<span class=date>(æ›´æ–°äº2021-10-10)</span>
/
<span class=cats>ğŸ“š
<a href=https://blog.imlk.top/categories/android/>Android</a></span>
/
<span class=tags>ğŸ·ï¸
<a href=https://blog.imlk.top/tags/android/>#Android</a>
<a href=https://blog.imlk.top/tags/avd/>#AVD</a>
<a href=https://blog.imlk.top/tags/xposed/>#Xposed</a>
<a href=https://blog.imlk.top/tags/%E7%9E%8E%E6%90%9E/>#çæ</a></span></span><br></div><main class=post-content><h3 id=èµ·å› >èµ·å› </h3><p>å¥½ä¹…æ²¡æœ‰å†™åšå®¢äº†ï¼Œå¹¶ä¸æ˜¯å…¶ä¸­æ²¡æœ‰æŠ˜è…¾2333ï¼Œä½œä¸šå¤ªå¤šå¥½å¤šäº‹æƒ…éƒ½æ²¡å†™ï¼ˆå…¶å®å°±æ˜¯æ‡’ï¼‰</p><p>é‚£å•¥ï¼Œæ‰‹å¤´æœ‰ä¸¤å°æ‰‹æœºï¼Œä¸€å°å¤ªçƒ‚ä½†æ˜¯7.1.1 rootè¿‡ï¼ˆæ›¾ç»çš„ä¸»åŠ›æœºï¼Œä¾ç„¶åšæŒºï¼‰ï¼Œå¦ä¸€å°æ˜¯7.0 åƒåœ¾ç´¢å¤§æ³•ï¼Œauå®šåˆ¶æœºï¼Œæ²¡æ³•rootã€‚
å‰ä¸€å°æ²¡æœ‰è¿åŠ¨ä¼ æ„Ÿå™¨ï¼Œæƒ³æ‹¿æ¥è®¡æ­¥éƒ½ä¸è¡Œï¼Œç¬¬äºŒå°æœ‰ä¼ æ„Ÿå™¨ä½†æ˜¯ä¸èƒ½rootï¼Œå°±ä¸èƒ½å¾®ä¿¡åˆ·æ­¥æ•°å•¦23333ï¼ˆçœŸæ˜¯è´ªå©ªçš„äººç±»ï¼‰</p><p>å¯»æ€ç€åœ¨avdä¸Šè£…å¾®ä¿¡åˆ·æ­¥æ•°ã€‚äºæ˜¯æœ‰äº†ä¸‹é¢çš„æŠ˜è…¾è®°å½•ï¼ŒåŒæ—¶ä¹Ÿæ˜¯åšä¸ªç¬”è®°ï¼Œé¿å…ä»¥åç»•å¼¯è·¯ï¼Œæ¯•ç«Ÿï¼Œåšå®¢éƒ½æ˜¯ç»™ä»¥åçš„è‡ªå·±çœ‹çš„23333ã€‚</p><h3 id=avd_44>AVD_4.4</h3><p>åŸå…ˆæˆ‘å°±æœ‰ä¸€å°Android 4.4çš„è™šæ‹Ÿè®¾å¤‡ï¼Œå·²ç»rootè€Œä¸”è£…äº†xpï¼Œæ¥ç€å®‰è£…å¾®ä¿¡å’Œæ¨¡å—æ‰“ç®—å¼€åˆ·çš„æ—¶å€™ï¼Œæˆ‘ç‚¹å¼€å¾®ä¿¡ï¼Œæ‚²å‰§å‘ç”Ÿäº†ï¼Œé—ªé€€ï¼ï¼ï¼ï¼
çœ‹ä¸€ä¸‹logcatï¼Œå‚»é€¼å¾®ä¿¡åœ¨æ–°ç‰ˆç”¨äº†ä¸€ä¸ªsdk21ä¹‹åæ‰åŠ å…¥çš„å‡½æ•°ï¼Œä½†æ˜¯è‡ªå·±åˆå£°ç§°æœ€ä½æ”¯æŒAndroid4.4ï¼Œæˆ‘çœŸæ˜¯dnlmï¼ï¼ï¼ï¼</p><p>æ²¡åŠæ³•ï¼Œçœ‹æ¥4.4ä¸Šæ˜¯æ²¡æ³•æŠ˜è…¾çš„ï¼Œç´¢æ€§å†å¼€ä¸€å°Android 7.1çš„AVDå§ï¼Œè¯´ä¸å®šä»¥åè¿˜è¦ç”¨ä¸Šå‘¢ã€‚</p><h3 id=avd_71>AVD_7.1</h3><p>æ€ä¹ˆå®‰è£…è¿™ä¸ªå°±ä¸ç”¨æˆ‘å¤šè¯´å•¦ï¼Œå›°éš¾çš„åœ°æ–¹ä¸»è¦å°±æ˜¯rootå’Œå®‰è£…å¾®ä¿¡è¿™ä¸¤ä¸ªã€‚</p><h4 id=root>root</h4><p>rootçš„è¯ï¼Œå°±å‚è€ƒè¿™ä¸ªäº†ï¼š
æŠŠsupersuå®˜ç½‘çš„é‚£ä¸€å¥—ä¸œè¥¿ä¸‹è½½ä¸‹æ¥ï¼ˆè™½ç„¶å„ä¸ªç‰ˆæœ¬æ–¹æ¡ˆä¸åŒï¼Œä½†æ˜¯æ–‡ä»¶éƒ½åœ¨é‡Œå¤´ï¼‰
<a href=https://blog.csdn.net/luvsnow/article/details/79963025>android emulator è·å– Rootæƒé™</a></p><p>æ³¨æ„å¯åŠ¨çš„æ—¶å€™åŠ ä¸Š<code>-writable-system</code>
å¯æƒœçš„æ˜¯ï¼Œè¿™ç§rootå¥½åƒæ˜¯çŸ­æ—¶æœŸçš„ï¼Œä¸èƒ½æŒ‰ç”µæºé”®é‡å¯è®¾å¤‡ï¼Œä¹Ÿä¸èƒ½adb rebooté‡å¯è™šæ‹Ÿè®¾å¤‡ï¼Œè¿™æ ·å†å¼€ä¹‹årootå°±ä¼šæ²¡ã€‚ä¸è¿‡æ¢å¤ä¹Ÿå¾ˆç®€å•ï¼Œåªè¦å†èµ°ä¸€é</p><ul><li>adb root</li><li>adb remount</li><li>adb shell</li><li>su &ndash;install</li><li>su -d&</li><li>setenforce 0
ç„¶åæˆæƒç®¡ç†é‡Œé¢rootåˆæœ‰å•¦</li></ul><h4 id=è£…å¾®ä¿¡>è£…å¾®ä¿¡</h4><p>è£…å¾®ä¿¡å¯æ²¡é‚£ä¹ˆç®€å•ï¼Œæ¯•ç«Ÿè¿™é‡Œå¯æ˜¯AVD_x86ï¼Œè¦æ˜¯ç®€å•çš„è¯ä½ ä¹Ÿä¸ä¼šæ¥è¿™é‡Œäº†ã€‚</p><p>å¾®ä¿¡åªç»™äº†armçš„libï¼Œä½†æ˜¯AVDæ™®éæ˜¯x86çš„ï¼Œä¼šå‘ç”Ÿå®‰è£…ä¸ä¸Šæç¤ºABIä¸å…¼å®¹çš„æƒ…å†µï¼Œå¯¹äºè¿™ç§é—®é¢˜æœ‰ä¸¤ä¸ªè§£å†³åŠæ³•ï¼š</p><ul><li>å®‰è£…armçš„AVDï¼ˆÃ—ï¼‰
ç¼ºç‚¹ï¼šä¸æ˜¯ä¸€èˆ¬çš„æ…¢ï¼Œçœ‹ä¸åˆ°å¼€æœºå®Œæˆ</li><li>ARM-Translationï¼ˆâˆšï¼‰
è¿™ä¸ªä¸œè¥¿ä¼¼ä¹æ˜¯intelæä¸ªä¸€ä¸ªé—­æºçš„å±‚ï¼Œèƒ½æŠŠapké‡Œçš„armç”¨çš„soåº“åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°è½¬æ¢æˆx86çš„æŒ‡ä»¤ï¼Œæ‰€æœ‰x86çš„Androidè®¾å¤‡é‡Œéƒ½æœ‰è¿™ä¸ªï¼ŒAndroid-x86å’ŒGenymotionæ®è¯´éƒ½å†…ç½®è¿™ä¸ªä¸œè¥¿ï¼Œæ€»ä¹‹ç‰›é€¼å°±å¯¹äº†ã€‚</li></ul><h5 id=arm-translation>ARM-Translation</h5><p>å…ˆè´´ä¸€å †å‚è€ƒå‰äººçš„èµ„æ–™</p><ol><li><a href=https://testerhome.com/topics/14231>ç§»åŠ¨æµ‹è¯•åŸºç¡€ Android æ¨¡æ‹Ÿå™¨ Genymotion å®‰è£…é…ç½®ä¸ ARM æ”¯æŒ</a></li><li><a href=https://android.stackexchange.com/questions/179482/android-emulator-install-failed-no-matching-abis-failed-to-extract-native-lib>Android Emulator - INSTALL_FAILED_NO_MATCHING_ABIS: Failed to extract native libraries, res=-113</a></li><li><a href=https://blog.csdn.net/Roland_Sun/article/details/49735601>å¦‚ä½•æ‰“å¼€Android X86å¯¹houdiniçš„æ”¯æŒ</a></li><li><a href=https://blog.csdn.net/wangkai0681080/article/details/79523003>Androidæ¨¡æ‹Ÿå™¨çŸ¥è¯†ä»¥åŠæ”¹é€ </a></li><li><a href=https://github.com/Rprop/libhoudini>Github/Rprop/libhoudini</a></li><li><a href=http://baba.zhaoxiuyuan.com/2017/11/126_android_x86_houdini/>Android-X86é›†æˆhoudini(Armå…¼å®¹å·¥å…·)</a></li></ol><p>èµ„æ–™è¿™ä¹ˆå¤šï¼Œæˆ‘æ¥æ¢³ç†ä¸€ä¸‹ä¸‹å§ï¼š
è¦ä½¿ç”¨è¿™ä¸ªARM-Translationå…¶å®ä¸éº»çƒ¦ã€‚ä¸»è¦ä¸‹é¢å‡ ä¸ªæ­¥éª¤ï¼š</p><ul><li><p>æ”¹<code>build.prop</code>é‡Œçš„<code>ro.product.cpu.abilist</code>å’Œ<code>ro.product.cpu.abilist32</code>ä¸º<code>x86,armeabi-v7a,armeabi</code>ï¼Œéª—è¿‡åŒ…å®‰è£…å™¨ï¼Œè®©å®ƒèƒ½æŠŠå¾®ä¿¡è£…ä¸Š(å‚è€ƒç¬¬4ç¯‡æ–‡ç« )</p></li><li><p>æ”¹<code>default.prop</code>é‡Œçš„<code>ro.dalvik.vm.native.bridge=0</code>ä¸º<code>ro.dalvik.vm.native.bridge=libhoudini.so</code>ï¼Œå¼€å¯ç³»ç»Ÿå†…çš„NativeBridge(å‚è€ƒç¬¬4ç¯‡æ–‡ç« )
è¿™é‡Œå¿…é¡»è¯´ä¸€ä¸‹ï¼Œè¿™ä¸ª<code>default.prop</code>ä¸åœ¨<code>system.img</code>é‡Œé¢ï¼Œåœ¨<code>ramdisk.img</code>é‡Œé¢ï¼Œ<code>ramdisk.img</code>æ˜¯åªè¯»çš„ï¼Œåªåœ¨å¯åŠ¨çš„æ—¶å€™è¯»ä¸€æ¬¡åˆ°å†…å­˜é‡Œã€‚æ‰€ä»¥å¯¹<code>default.prop</code>çš„ä¿®æ”¹é‡å¯åä¼šä¸¢å¤±ï¼Œå”¯ä¸€çš„åŠæ³•æ˜¯æ‰‹åŠ¨ç¼–è¾‘ä¸€ä¸ª<code>ramdisk.img</code>ï¼Œç„¶åç”¨emulatorçš„<code>-ramdisk</code>é€‰é¡¹æŒ‡å®šä¿®æ”¹åçš„<code>ramdisk.img</code>æ–‡ä»¶ã€‚</p><p>ç¼–è¾‘çš„æ–¹æ³•ä¹Ÿä¸éš¾ï¼Œå‚è€ƒè¿™ä¸ªé‡Œé¢çš„ç¬¬äºŒç§æ–¹æ³•<a href=https://blog.csdn.net/linuxdriverdeveloper/article/details/8124319>åˆ¶ä½œ/è§£å‹android ramdisk.imgé•œåƒ</a></p><ul><li>ä»SDKç›®å½•é‡Œæ‰¾åˆ°ramdisk.imgï¼Œå¤‡ä»½ä¸€ä»½åˆ°è‡ªå·±çš„avdç›®å½•é‡Œï¼Œ</li><li>ç”¨gunzipè§£å‹å®ƒï¼Œå†ç”¨cpioè§£åŒ…åˆ°ä¸€ä¸ªç›®å½•é‡Œ</li><li>åœ¨è¿™ç›®å½•é‡Œæ‰¾åˆ°<code>default.prop</code>è¿›è¡Œä¿®æ”¹</li><li>æ³¨æ„å›packageçš„æ—¶å€™ï¼Œä¸è¦ç”¨cpioæ‰“åŒ…ï¼Œå¯èƒ½ä¼šæœ‰é—®é¢˜å¯¼è‡´å¼€æœºä¸äº†ï¼Œç”¨<code>mkbootfs ./ä½ ä¹‹å‰è§£åŒ…åˆ°çš„ç›®å½• | gzip > ramdisk-new.img</code>åˆ¶ä½œä¿®æ”¹åçš„é•œåƒï¼ˆå¯ä»¥ä»è¿™ä¸‹è½½mkbootfs <a href=https://github.com/shenyuanv/mkboot-tools>https://github.com/shenyuanv/mkboot-tools</a> ï¼‰</li><li>æœ€åçš„<code>ramdisk-new.img</code>å°±æ˜¯ä¿®æ”¹è¿‡çš„<code>ramdisk.img</code>äº†ï¼Œåœ¨å¯åŠ¨avdæ—¶ç”¨emulatorçš„<code>-ramdisk</code>é€‰é¡¹æŒ‡å®šå®ƒå³å¯ã€‚</li></ul></li><li><p>ç¬¬3ç¯‡æ–‡ç« é‡Œé¢è®¾ç½®é‡Œé‚£ä¸ªå«<code>Enable native bridge</code>çš„é€‰é¡¹æˆ‘ä¸€ç›´æ²¡æœ‰æ‰¾åˆ°ï¼Œå®ƒè¯´æ•ˆæœåªæ˜¯<code>persist.sys.nativebridge</code>ä»0æ”¹æˆäº†1ï¼Œä¿é™©èµ·è§ï¼Œæˆ‘åœ¨<code>build.prop</code>é‡ŒåŠ äº†<code>persist.sys.nativebridge=1</code></p></li><li><p>æ‰§è¡Œenable_nativebridge
è¿™å‡ ç¯‡æ–‡ç« é‡Œéƒ½æåˆ°äº†<code>enable_nativebridge</code>è¿™ä¸ªä¸œè¥¿ï¼Œä½†æ˜¯æˆ‘æ‰¾äº†ä¸€ç•ªï¼Œæˆ‘çš„AVDé‡Œé¢æ²¡æœ‰è¿™ä¸ªè„šæœ¬å•Šå•Šï¼ŒçœŸçš„æœäº†ï¼Œä¸ºä»€ä¹ˆgoogleåšäº†è¿™ä¸ªä¸œè¥¿åˆä¸æ‹¿å‡ºæ¥ç»™æˆ‘ä»¬ç”¨å‘¢ï¼Ÿï¼Ÿï¼Ÿï¼Ÿå’±å•¥ä¹Ÿä¸çŸ¥é“ï¼Œå’±ä¹Ÿä¸æ•¢é—®</p><p>ä¸è¿‡è¿˜å¥½ï¼Œåœ¨ä¸‡èƒ½çš„githubä¸Šé¢æ‰¾åˆ°äº†ä¸€æ®µ<code>enable_nativebridge</code>ï¼Œå¤§æ¦‚è¯»ä¸€è¯»èƒ½å‘ç°ï¼Œæ°å¥½æ˜¯Android7ç”¨çš„ï¼Œè€Œä¸”è€ƒè™‘äº†å„ç§æƒ…å†µï¼Œç”šè‡³è¿˜å¯ä»¥åœ¨çº¿ä¸‹è½½æ–‡ä»¶ï¼ˆæ˜¾ç„¶è®¿é—®ä¸äº†ï¼Œä¸è¿‡æœ‰åŠæ³•è§£å†³çš„ï¼‰ï¼Œ<a href=https://gist.github.com/41a5d8ba498ceecca28e9d1069a32ede>https://gist.github.com/41a5d8ba498ceecca28e9d1069a32ede</a>ï¼Œè®¿é—®ä¸äº†gistçš„å¯ä»¥ç”¨googleå¿«ç…§çœ‹ã€‚æ–¹ä¾¿å¤§å®¶æˆ‘å°±è´´åœ¨ä¸‹é¢äº†ï¼š</p></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e>#!/system/bin/sh
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>PATH<span style=color:#f92672>=</span>/system/bin:/system/xbin
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>houdini_bin<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>dest_dir<span style=color:#f92672>=</span>/system/lib$1/arm$1
</span></span><span style=display:flex><span>binfmt_misc_dir<span style=color:#f92672>=</span>/proc/sys/fs/binfmt_misc
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -z <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;`uname -m`&#34;</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;x86_64&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		v<span style=color:#f92672>=</span>7_y
</span></span><span style=display:flex><span>		url<span style=color:#f92672>=</span>http://goo.gl/SBU3is
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>		v<span style=color:#f92672>=</span>7_x
</span></span><span style=display:flex><span>		url<span style=color:#f92672>=</span>http://goo.gl/0IJs40
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>	v<span style=color:#f92672>=</span>7_z
</span></span><span style=display:flex><span>	url<span style=color:#f92672>=</span>http://goo.gl/FDrxVN
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -s /system/lib$1/libhoudini.so <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	log -pi -thoudini <span style=color:#e6db74>&#34;found /system/lib</span>$1<span style=color:#e6db74>/libhoudini.so&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>elif</span> <span style=color:#f92672>[</span> -e /system/etc/houdini$v.sfs <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	mount /system/etc/houdini$v.sfs $dest_dir
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> mountpoint -q $dest_dir; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		kill -9 <span style=color:#e6db74>`</span>fuser -m $dest_dir<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>		umount -f $dest_dir
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>	mkdir -p /data/arm
</span></span><span style=display:flex><span>	cd /data/arm
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>while</span> ! mount houdini$v.sfs $dest_dir; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>while</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>getprop net.dns1<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>			sleep <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>		wget $url -cO houdini$v.sfs <span style=color:#f92672>&amp;&amp;</span> <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>		rm -f houdini$v.sfs
</span></span><span style=display:flex><span>		sleep <span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> -s /system/lib$1/libhoudini.so <span style=color:#f92672>]</span> <span style=color:#f92672>||</span> mount --bind $dest_dir/libhoudini.so /system/lib$1/libhoudini.so
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># this is to add the supported binary formats via binfmt_misc</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> ! -e $binfmt_misc_dir/register <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	mount -t binfmt_misc none $binfmt_misc_dir
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cd $binfmt_misc_dir
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -e register <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>[</span> -e /system/bin/houdini$1 <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> dest_dir<span style=color:#f92672>=</span>/system/bin
</span></span><span style=display:flex><span>	<span style=color:#75715e># register Houdini for arm binaries</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -z <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		echo <span style=color:#e6db74>&#39;:arm_exe:M::\\x7f\\x45\\x4c\\x46\\x01\\x01\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x02\\x00\\x28::&#39;</span><span style=color:#e6db74>&#34;</span>$dest_dir<span style=color:#e6db74>/houdini:P&#34;</span> &gt; register
</span></span><span style=display:flex><span>		echo <span style=color:#e6db74>&#39;:arm_dyn:M::\\x7f\\x45\\x4c\\x46\\x01\\x01\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x03\\x00\\x28::&#39;</span><span style=color:#e6db74>&#34;</span>$dest_dir<span style=color:#e6db74>/houdini:P&#34;</span> &gt; register
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>		echo <span style=color:#e6db74>&#39;:arm64_exe:M::\\x7f\\x45\\x4c\\x46\\x02\\x01\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x02\\x00\\xb7::&#39;</span><span style=color:#e6db74>&#34;</span>$dest_dir<span style=color:#e6db74>/houdini64:P&#34;</span> &gt; register
</span></span><span style=display:flex><span>		echo <span style=color:#e6db74>&#39;:arm64_dyn:M::\\x7f\\x45\\x4c\\x46\\x02\\x01\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x03\\x00\\xb7::&#39;</span><span style=color:#e6db74>&#34;</span>$dest_dir<span style=color:#e6db74>/houdini64:P&#34;</span> &gt; register
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -e arm<span style=color:#e6db74>${</span>1<span style=color:#e6db74>}</span>_exe <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		houdini_bin<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>	log -pe -thoudini <span style=color:#e6db74>&#34;No binfmt_misc support&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $houdini_bin -eq <span style=color:#ae81ff>0</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	log -pe -thoudini <span style=color:#e6db74>&#34;houdini</span>$1<span style=color:#e6db74> enabling failed!&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>	log -pi -thoudini <span style=color:#e6db74>&#34;houdini</span>$1<span style=color:#e6db74> enabled&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>getprop ro.zygote<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;zygote64_32&#34;</span> -a -z <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> exec $0 <span style=color:#ae81ff>64</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>exit <span style=color:#ae81ff>0</span>
</span></span></code></pre></div><p>æŠŠè¿™ä¸ªè„šæœ¬æ”¾åˆ°avdé‡Œçš„<code>/system/bin/</code>ç›®å½•ä¸‹ï¼Œè®°å¾—æŠŠ<code>log -pi -thoudini</code>æ”¹æˆ<code>echo</code>æ–¹ä¾¿æˆ‘ä»¬æœ€åè§‚å¯Ÿæ˜¯å¦æˆåŠŸäº†ã€‚</p><h6 id=houdinisfs>houdini.sfs</h6><p>å…¶ä¸­æœ€æ ¸å¿ƒçš„æ˜¯é‚£ä¸ªhoudini.sfsæ–‡ä»¶ï¼Œå½“ç„¶å„ä¸ªAndroidç‰ˆæœ¬çš„æ–‡ä»¶åä¸å¤ªä¸€æ ·ï¼Œå›½å†…è¦ä¸‹è½½çš„è¯ï¼Œç¬¬6ç¯‡æ–‡ç« é‡Œçš„ä½œè€…ç»™äº†çŸ­ç½‘å€è¿˜åŸçš„åŠæ³•ï¼Œä¸è¿‡æˆ‘è¿˜å‘ç°å¦å¤–ä¸€ä¸ªä»“åº“ <a href=https://github.com/Rprop/libhoudini>https://github.com/Rprop/libhoudini</a> ï¼Œè¿™é‡Œé¢å„ä¸ªç‰ˆæœ¬çš„sfsæ–‡ä»¶éƒ½æœ‰ï¼Œé˜…è¯»è„šæœ¬å‘ç°ï¼Œå¯ä»¥<strong>æ‰‹åŠ¨ä¸‹è½½è¿™ä¸ªæ–‡ä»¶</strong>ç„¶åæ”¾åˆ°<code>/system/etc/</code>ä¸‹é¢ã€‚</p><p>è¿™ä¸ªsfsæ–‡ä»¶å…¶å®æ˜¯<code>squashfs</code>æ ¼å¼çš„ä¸€ä¸ªå½±åƒï¼Œè„šæœ¬é‡ŒæŠŠå®ƒæŒ‚è½½åˆ°<code>/system/lib/arm</code>æ–‡ä»¶å¤¹é‡Œï¼ˆ64ä½çš„æƒ…å†µæ˜¯å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿™é‡Œçš„æè¿°éƒ½ä»¥x86ä¸ºå‡†ï¼Œx86_64çœ‹ä¸Šé¢çš„è„šæœ¬è¿›è¡Œå˜é€šï¼‰ã€‚</p><p><strong>ä¸€äº›æ„å¤–</strong></p><ul><li><p>ä¸­é€”mountè¿™ä¸ªhoudini.sfsçš„è¿‡ç¨‹å‘ç”Ÿäº†ä¸€äº›æ„å¤–ï¼Œé¦–å…ˆæç¤º<code>No such file or directory</code>ï¼Œæ‰‹åŠ¨<code>mkdir /system/lib/arm</code>è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p></li><li><p>ä¹‹åè¯´<code>mount: losetup failed 1</code>ï¼Œæ”¹ä¸ºæ‰‹åŠ¨mountåŠ ä¸Š<code>-v</code>é€‰é¡¹åè¯´</p><pre tabindex=0><code>try &#39;/system/etc/houdini7_x.sfs&#39; type &#39;ext3&#39; on &#39;/system/lib/arm/&#39;
</code></pre><p>æ˜¾ç„¶å®ƒæŠŠæˆ‘æ–‡ä»¶æ ¼å¼æé”™äº†ï¼Œè¿™ä¸ªsfsæ–‡ä»¶åº”è¯¥æ˜¯<code>squashfs</code>è€Œä¸æ˜¯<code>ext3</code>ï¼ŒåŠ <code>-t</code>é€‰é¡¹å¼ºåˆ¶æŒ‡å®š<code>squashfs</code>æ ¼å¼åå‘Šè¯‰æˆ‘<code>No such device</code>ï¼Œä½ è¯´ä½ é©¬å‘¢ï¼Œæˆ‘æ–‡ä»¶å¥½ç«¯ç«¯åœ¨è¿™ä½ å‘Šè¯‰æˆ‘æ²¡æœ‰ã€‚æ— å¥ˆä¹‹ä¸‹æƒ³åˆ°äº†<code>strace</code>å¤§æ³•ï¼Œç»™è¿™æ¡å‘½ä»¤å‰åŠ ä¸Š<code>strace</code>ï¼ŒæŸ¥çœ‹ç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹ï¼Œå‘ç°å…¶ä¸­è°ƒç”¨äº†<code>mount()</code>å‡½æ•°ï¼š</p><pre tabindex=0><code>mount(&#34;/system/etc/houdini7_x.sfs&#34;, &#34;/system/lib/arm/&#34;, &#34;squashfs&#34;, MS_SILENT, NULL) = -1 ENODEV (No such device)
</code></pre><p>manæŸ¥mount()çš„æ‰‹å†Œå‘ç°ï¼Œ<code>ENODEV</code>è¡¨ç¤ºä¸æ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿæ ¼å¼ï¼Œä¹Ÿå°±æ˜¯è¯´<strong>è¿™ä¸ªavdå®ƒä¸«çš„ä¸æ”¯æŒ<code>squashfs</code>è¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿ</strong>ï¼Œç½‘ä¸Šè¯´å¯ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™åŠ é€‰é¡¹ï¼Œä½†æ˜¯æ˜¾ç„¶æˆ‘ä»¬æ˜¯ä¸ä¼šå»ç¼–è¯‘çš„ï¼Œè´¹åŠ›ä¸è®¨å¥½ã€‚è§£å†³åŠæ³•å¾ˆç®€å•ï¼Œåœ¨å®¿ä¸»æœºä¸Šmountä¸€ä¸‹ï¼ŒæŠŠé‡Œé¢çš„æ–‡ä»¶æ‹¿å‡ºæ¥<code>adb push</code>åˆ°avdçš„<code>/system/lib/arm</code>è¿™ä¸ªç›®å½•ï¼Œå¤§åŠŸå‘Šæˆã€‚</p></li><li><p>ä¹‹åè¿˜æœ‰ä¸ª</p><pre tabindex=0><code>mount --bind $dest_dir/libhoudini.so /system/lib$1/libhoudini.so
</code></pre><p>åˆå¤±è´¥äº†ï¼ˆAndroidç»ˆç«¯é‡Œçš„å‘½ä»¤å¥½åƒå°±æ²¡å‡ ä¸ªå¥½ä½¿çš„ï¼‰ï¼Œç›®çš„ä¸»è¦æ˜¯æŠŠ<code>libhoudini.so</code>ä»<code>/system/lib/arm</code>æ–‡ä»¶å¤¹å¼•åˆ°<code>/system/lib</code>ä¸‹é¢å»ï¼Œè¿™ä¸ªç”¨<code>ln -s</code>æä¸€ä¸‹å°±å¥½ã€‚</p></li></ul><p>è¿™ä¹ˆæä¸€é€šï¼Œç»ˆäºç­‰æ¥äº†è¾“å‡º<code>houdini enabled</code>ã€‚è‡³æ­¤<code>houdini</code>å°±ç®—æ˜¯è¿è¿›å»äº†ã€‚</p><h5 id=è£…å¾®ä¿¡-1>è£…å¾®ä¿¡</h5><p>å¾®ä¿¡è¿˜æ˜¯é‚£æ ·è£…ï¼Œæ‰“å¼€ä¹Ÿèƒ½ç™»é™†ï¼Œçœ‹èµ·æ¥ç”šè‡³æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯æ‰“å¼€å¾®ä¿¡å°ç¨‹åºçš„æ—¶å€™å°±å‡ºç°é—®é¢˜äº†ï¼Œç›´æ¥å´©æ‰ã€‚
logcaté‡Œå†’å‡º</p><pre tabindex=0><code>houdini : [17913] Unsupported feature (ID:0x20e000b2).
</code></pre><p>åœ¨è¿™ä¹‹å‰çš„ä¸€ä¸ªæ—¥å¿—æ˜¯houdiniåŠ è½½äº†å¾®ä¿¡é‡Œé¢çš„ä¸€ä¸ª<code>libj2v8.so</code>æ–‡ä»¶ï¼Œä¹Ÿè®¸æ˜¯å› ä¸ºè¿™ä¸ªæ–‡ä»¶é‡Œé¢çš„æŒ‡ä»¤æœ‰ç‚¹ç‰¹æ®Šæ‰€ä»¥å´©çš„å§ã€‚</p><p>ä¸Šç½‘æ‰¾äº†æ‰¾ï¼Œå‘ç°ä¸å°‘äººé‡åˆ°ç±»ä¼¼çš„è¿™ç§<code>Unsupported feature</code>é—®é¢˜ï¼Œå°è¯•è¿‡idaå¼€<code>libhoudini.so</code>æ‰¾è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå‘ç°è¿™æ ·çš„é”™è¯¯ä¸€å…±æœ‰å…­ç±»ï¼Œå­—ç¬¦ä¸²å¥½åƒæ˜¯<code>Unsupported feature (ID:0x20e%05x)</code>ï¼Œä¹Ÿå°±æ˜¯è¯´åé¢çš„<code>0x000b2</code>æ˜¯å˜åŒ–çš„ï¼Œä½†æ˜¯å­—ç¬¦ä¸²å¼•ç”¨çš„åœ°æ–¹æ²¡æ‰¾åˆ°ï¼Œå› ä¸ºidaåæ±‡ç¼–çš„æ—¶å€™å¾ˆå¤šå‡½æ•°æ²¡æœ‰åæ±‡ç¼–æˆåŠŸï¼Œå†åŠ ä¸Šæˆ‘idaç”¨çš„ä¸å¤ªç†Ÿï¼Œå°±æ²¡çœ‹äº†ã€‚æœ€åç…äº†ä¸€çœ¼<code>houdini.sys</code>é‡Œé¢æœ‰ä¸ª<code>houdini</code>å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰§è¡Œä¸€ä¸‹è¾“å‡ºï¼š</p><pre tabindex=0><code>[18097] 
[18097] Please don&#39;t use this program directly!
[18097] Use to check version only.
[18097] Usage: --version        output version information and exit!
[18097] 
</code></pre><p>çœ‹äº†ä¸€ä¸‹æˆ‘çš„&ndash;versionè¾“å‡ºæ˜¯<code>Houdini version: 6.1.2d_x.48748</code>ã€‚å®ƒå¼ºè°ƒ<code>don't use this program directly</code>ï¼Œæˆ‘å°±çº³é—·äº†ï¼Œéš¾ä¸æˆè¿™ä¸ªç¨‹åºé™¤äº†è¾“å‡ºversionï¼Œé‡Œé¢è¿˜æœ‰ä¸œè¥¿ï¼Ÿï¼Ÿï¼Ÿ
ç´¢æ€§æ‹¿idaå¼€äº†ä¸€ä¸‹ï¼Œä¸å‡ºæˆ‘æ‰€æ–™ï¼Œé‡Œé¢ç”šè‡³æœ‰å®Œæ•´çš„<code>libhoudini.so</code>é‡Œé¢çš„å†…å®¹ï¼Œå…³é”®æ˜¯è¿™ä¸ªæ–‡ä»¶idaåæ±‡ç¼–å¾—æ¯”è¾ƒå®Œå–„ï¼ŒæŒ‰å­—ç¬¦ä¸²æ‰¾å‡ºé”™åœ°æ–¹ï¼Œå‘ç°æ˜¯è½å…¥äº†ä¸€ä¸ªswitchè¯­å¥çš„defaultåŒºåŸŸï¼Œæ— å¥ˆä»£ç å¤ªå¤æ‚ï¼Œçœ‹ä¸æ‡‚ï¼Œæ”¾å¼ƒäº†ã€‚</p><h5 id=ç°æœ‰çš„å…¶å®ƒæ–¹æ¡ˆ>ç°æœ‰çš„å…¶å®ƒæ–¹æ¡ˆ</h5><p>å‚è€ƒäº†ç°æœ‰çš„Android x86é¡¹ç›®ï¼Œå‘ç°å®ƒä¹Ÿä½¿ç”¨åˆ°äº†houdiniè¿™ä¸ªä¸œè¥¿æ¥å®ç°armæ¶æ„æ”¯æŒï¼Œåœ¨å®ƒçš„Android7.1.1(sdk 25)ç‰ˆæœ¬ä¸­ï¼ŒåŒæ ·ä¹Ÿå‘ç°äº†<code>enable_nativebridge</code>è¿™ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œåœ¨pcä¸Šuç›˜å¯åŠ¨Android x86èƒ½å¤Ÿå®Œç¾æ‰“å¼€å¾®ä¿¡å°ç¨‹åºï¼Œä½†æ˜¯å¥‡æ€ªçš„æ˜¯ï¼Œæ ¹æ®è„šæœ¬è¯­å¥ï¼Œå®ƒå†…éƒ¨ä½¿ç”¨çš„ä¸æ˜¯å¯¹åº”çš„houdini7_xï¼Œè€Œæ˜¯houdini6_yï¼Œä¸‹é¢è´´å‡º<code>enable_nativebridge</code>çš„å†…å®¹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/system/bin/sh
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>PATH<span style=color:#f92672>=</span>/system/bin:/system/xbin
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>houdini_bin<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>dest_dir<span style=color:#f92672>=</span>/system/lib$1/arm$1
</span></span><span style=display:flex><span>binfmt_misc_dir<span style=color:#f92672>=</span>/proc/sys/fs/binfmt_misc
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cd /data/arm
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -e /system/lib$1/libhoudini.so <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	log -pi -thoudini <span style=color:#e6db74>&#34;found /system/lib</span>$1<span style=color:#e6db74>/libhoudini.so&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>elif</span> <span style=color:#f92672>[</span> -e /system/etc/houdini$1.sfs <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	busybox mount /system/etc/houdini$1.sfs $dest_dir
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> mountpoint -q $dest_dir; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		kill -9 <span style=color:#e6db74>`</span>fuser -m $dest_dir<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>		umount -f $dest_dir
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>while</span> ! busybox mount houdini$1.sfs $dest_dir; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>while</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>getprop net.dns1<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>			sleep <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -z <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;`uname -m`&#34;</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;x86_64&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> url<span style=color:#f92672>=</span>http://goo.gl/Knnmyl <span style=color:#f92672>||</span> url<span style=color:#f92672>=</span>http://goo.gl/JsoX2C
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>			url<span style=color:#f92672>=</span>http://goo.gl/n6KtQa
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>		wget $url -cO houdini$1.sfs <span style=color:#f92672>&amp;&amp;</span> <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>		rm -f houdini$1.sfs
</span></span><span style=display:flex><span>		sleep <span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># if you don&#39;t see the files &#39;register&#39; and &#39;status&#39; in /proc/sys/fs/binfmt_misc</span>
</span></span><span style=display:flex><span><span style=color:#75715e># then run the following command:</span>
</span></span><span style=display:flex><span><span style=color:#75715e># mount -t binfmt_misc none /proc/sys/fs/binfmt_misc</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># this is to add the supported binary formats via binfmt_misc</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> ! -e $binfmt_misc_dir/register <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	mount -t binfmt_misc none $binfmt_misc_dir
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cd $binfmt_misc_dir
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -e register <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>[</span> -e /system/bin/houdini$1 <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> dest_dir<span style=color:#f92672>=</span>/system/bin
</span></span><span style=display:flex><span>	<span style=color:#75715e># register Houdini for arm binaries</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -z <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		echo <span style=color:#e6db74>&#39;:arm_exe:M::\\x7f\\x45\\x4c\\x46\\x01\\x01\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x02\\x00\\x28::&#39;</span><span style=color:#e6db74>&#34;</span>$dest_dir<span style=color:#e6db74>/houdini:P&#34;</span> &gt; register
</span></span><span style=display:flex><span>		echo <span style=color:#e6db74>&#39;:arm_dyn:M::\\x7f\\x45\\x4c\\x46\\x01\\x01\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x03\\x00\\x28::&#39;</span><span style=color:#e6db74>&#34;</span>$dest_dir<span style=color:#e6db74>/houdini:P&#34;</span> &gt; register
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>		echo <span style=color:#e6db74>&#39;:arm64_exe:M::\\x7f\\x45\\x4c\\x46\\x02\\x01\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x02\\x00\\xb7::&#39;</span><span style=color:#e6db74>&#34;</span>$dest_dir<span style=color:#e6db74>/houdini64:P&#34;</span> &gt; register
</span></span><span style=display:flex><span>		echo <span style=color:#e6db74>&#39;:arm64_dyn:M::\\x7f\\x45\\x4c\\x46\\x02\\x01\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x03\\x00\\xb7::&#39;</span><span style=color:#e6db74>&#34;</span>$dest_dir<span style=color:#e6db74>/houdini64:P&#34;</span> &gt; register
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -e arm<span style=color:#e6db74>${</span>1<span style=color:#e6db74>}</span>_exe <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		houdini_bin<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>	log -pe -thoudini <span style=color:#e6db74>&#34;No binfmt_misc support&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $houdini_bin -eq <span style=color:#ae81ff>0</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	log -pe -thoudini <span style=color:#e6db74>&#34;houdini</span>$1<span style=color:#e6db74> enabling failed!&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>	log -pi -thoudini <span style=color:#e6db74>&#34;houdini</span>$1<span style=color:#e6db74> enabled&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>getprop ro.zygote<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;zygote64_32&#34;</span> -a -z <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> exec $0 <span style=color:#ae81ff>64</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>exit <span style=color:#ae81ff>0</span>
</span></span></code></pre></div><p>ä¹‹åæœ‰å°è¯•å°†houdini6_xå®‰è£…åˆ°æ¨¡æ‹Ÿå™¨ï¼ˆé€‰æ‹©xè€Œä¸æ˜¯yæ˜¯å› ä¸ºx86çš„avdæ¨¡æ‹Ÿå™¨æ˜¯32ä½çš„è€Œä¸æ˜¯64ä½ï¼‰ä¸­ï¼Œæƒ…å†µæ¯”houdini7_xè¦ç³Ÿç³•ï¼Œè¿™æ¬¡æ˜¯å¤§æ¦‚æ„æ€æ˜¯æ˜¯æ¨¡æ‹Ÿå™¨ç¼ºå°‘x86çš„æŸäº›featureï¼Œç¨‹åºéƒ½ä¸èƒ½è·‘èµ·æ¥äº†ï¼Œå…·ä½“æƒ…å†µæ²¡æœ‰å†æ·±ç©¶äº†ï¼Œåç»§æƒ³è¦ç»§ç»­å¼„çš„è¯ï¼Œæˆ‘æƒ³ï¼Œå¯ä»¥ä»è¿™ä¸ªæ–¹é¢ç»§ç»­è€ƒè™‘ã€‚å¦å¤–ï¼Œhoudiniçš„åŸç†å¯ä»¥æ¢ç©¶ä¸€ç•ªï¼Œæ¯”å¦‚è¯•è¯•æ›¿ä»£å“ä»€ä¹ˆçš„</p><h5 id=æ”¾å¼ƒè£…å¾®ä¿¡>æ”¾å¼ƒè£…å¾®ä¿¡</h5><p>ä¼¼ä¹æ¨¡æ‹Ÿå™¨é‡Œå¾®ä¿¡å¼€ä¸äº†å°ç¨‹åºæ˜¯ç°åœ¨çš„ä¸€ç§é€šç—…ï¼Œå¤œç¥å•¥çš„ä¹Ÿå¼€ä¸äº†ï¼Œæ®è¯´å¾—ä¸Šæ—§ç‰ˆæœ¬å¾®ä¿¡ï¼Œæˆ‘è¿™é‡Œå°è¯•å®‰è£…å¾®ä¿¡7.0å‰çš„æœ€åä¸€ä¸ªç‰ˆæœ¬ï¼Œä½†æ˜¯ç™»å½•ä¹‹åå°±ä¸€ç›´ç»™æˆ‘é—ªé€€äº†ï¼Œæ—¥å¿—ä¹Ÿå•¥éƒ½æ²¡ï¼Œemmmmï¼Œæ¯”è¾ƒçƒ¦èºã€‚</p><p>æœ€åç»“å±€æ˜¯ï¼šè€è€å®å®ä¹°æ–°æ‰‹æœºåˆ·æ­¥æ•°å§ï¼</p><h3 id=å…¶å®ƒ>å…¶å®ƒ</h3><h4 id=install_failed_container_error>INSTALL_FAILED_CONTAINER_ERROR</h4><p>å¦‚æœadbå®‰è£…å¾®ä¿¡çš„æ—¶å€™æç¤º<code>INSTALL_FAILED_CONTAINER_ERROR</code>ï¼Œä¸æ˜¯ç½‘ä¸Šè¯´çš„é‚£ç§å› ä¸º<code>Manifest.xml</code>é‡Œé¢å†™çš„å®‰è£…ä½ç½®ä¸å¯¹çš„åŸå› ï¼Œå¤šåŠæ˜¯ä¸€äº›ç„å­¦é—®é¢˜ï¼Œåªè¦åœ¨<code>adb install</code>åŠ ä¸Š<code>-r</code>è¿™ä¸ªé€‰é¡¹å°±å¥½äº†ã€‚</p></main><div id=comments><hr><script src=https://utteranc.es/client.js repo=KB5201314/KB5201314.github.io issue-term=pathname label='ğŸ’¬ comments ğŸ’¬' theme=github-light crossorigin=anonymous async></script></div><footer class=footer><hr>Â© imlk 2017 &ndash; 2023 | <a href=https://blog.imlk.top>imlk's blog</a> | <a href=https://github.com/KB5201314/>Github</a> | <a href=mailto:me@imlk.top>Email</a> | <a href=https://beian.miit.gov.cn/>äº¬ICPå¤‡2020042968å·-1</a></footer></body></html>