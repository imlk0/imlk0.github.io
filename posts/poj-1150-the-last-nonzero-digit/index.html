<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>POJ 1150 The Last Non-zero Digit | imlk's blog</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel=stylesheet></head><body><header class=header><a class=logo href=/>imlk's Blog</a><nav><ul class=menu><li><a href=/>🏠Home</a></li><li><a href=/about/>👋About</a></li><li><a href=/archives/>📜Archives</a></li><li><a href=/friends/>🔗Friends</a></li><li><a href=/dn42/>🕸️DN42</a></li><li><a href=/index.xml>📢Subscribe</a></li></ul></nav></header><hr><div class=article-meta><h1><span class=title>POJ 1150 The Last Non-zero Digit</span></h1><span><span class=date>📅 2018-07-13</span>
<span class=date>(更新于2021-10-10)</span>
/
<span class=cats>📚
<a href=https://blog.imlk.top/categories/algorithm/>Algorithm</a></span>
/
<span class=tags>🏷️
<a href=https://blog.imlk.top/tags/poj/>#POJ</a>
<a href=https://blog.imlk.top/tags/%E9%98%B6%E4%B9%98/>#阶乘</a>
<a href=https://blog.imlk.top/tags/%E6%9C%80%E4%BD%8E%E9%9D%9E%E9%9B%B6%E4%BD%8D/>#最低非零位</a></span></span><br></div><main><h3 id=原题>原题</h3><p><a href="http://poj.org/problem?id=1150">http://poj.org/problem?id=1150</a></p><h3 id=参考>参考</h3><p><a href=https://blog.csdn.net/txl199106/article/details/40653579>https://blog.csdn.net/txl199106/article/details/40653579</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;algorithm&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstring&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;string&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cmath&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>#define LL long long
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> <span style=color:#66d9ef>namespace</span> std;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 除了统计2，5的总因子数，还统计末尾位为3，7，9的数目
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>count</span>(LL co[], <span style=color:#66d9ef>int</span> n) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> (n <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> m <span style=color:#f92672>=</span> n; m <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>; m <span style=color:#f92672>=</span> m <span style=color:#f92672>/</span> <span style=color:#ae81ff>5</span>) {<span style=color:#75715e>// 处理1...n之间的奇数的末尾位
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// 末尾位可能为1, 3, 5, 7, 9
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// 1无需统计，3,7,9只要求统计出现在末位的次数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// 5需要统计作为因子出现过的次数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 将这些奇数分为以5的倍数和非5的倍数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// 例如1,3,5,7,9,11,13...,53,55,57,59
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// 分为1,3,7,9,11,13,17...,53,57,59和5*1，5*3，5*5...5*11，在for循环里每次m处以5来实现问题转换
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 先统计1...m的奇数中不含因子5的数中末尾3，7，9出现的次数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		co[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>+=</span> m <span style=color:#f92672>/</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>+</span> ((m <span style=color:#f92672>%</span> <span style=color:#ae81ff>10</span>) <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>3</span>); <span style=color:#75715e>// m[1] 统计3
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		co[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>+=</span> m <span style=color:#f92672>/</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>+</span> ((m <span style=color:#f92672>%</span> <span style=color:#ae81ff>10</span>) <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>7</span>); <span style=color:#75715e>// m[1] 统计7
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		co[<span style=color:#ae81ff>4</span>] <span style=color:#f92672>+=</span> m <span style=color:#f92672>/</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>+</span> ((m <span style=color:#f92672>%</span> <span style=color:#ae81ff>10</span>) <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>9</span>); <span style=color:#75715e>// m[1] 统计9
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 开始问题转换（利用for循环）(其实也可像下面那样用递归)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// 将1...m的奇数中含有因子5的（5，15，25，35...）(共有(m / 10 + ((m % 10) &gt;= 5))个)，先处以因子5，转化为统计（1，3，5，7...）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		co[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>+=</span> m <span style=color:#f92672>/</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>+</span> ((m <span style=color:#f92672>%</span> <span style=color:#ae81ff>10</span>) <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>5</span>);<span style=color:#75715e>//统计因子5
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// m[0] 统计2
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	co[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>+=</span> n <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>;<span style=color:#75715e>// 处理1...n之间的偶数，每个先处以2，问题转换为统计1...(n/2)，采用递归
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	count(co, n <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>(<span style=color:#66d9ef>int</span> argc, <span style=color:#66d9ef>char</span> <span style=color:#66d9ef>const</span> <span style=color:#f92672>*</span>argv[]) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>int</span> n, m;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>while</span> (<span style=color:#f92672>~</span>scanf(<span style=color:#e6db74>&#34;%d%d&#34;</span>, <span style=color:#f92672>&amp;</span>n, <span style=color:#f92672>&amp;</span>m)) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> (m <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>			printf(<span style=color:#e6db74>&#34;1</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>);
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>continue</span>;
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		LL co_1[<span style=color:#ae81ff>5</span>] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>0</span>};<span style=color:#75715e>//依次统计2，3，5，7，9的数目
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		LL co_2[<span style=color:#ae81ff>5</span>] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>0</span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		count(co_1, n);<span style=color:#75715e>// 统计1...n
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		count(co_2, n <span style=color:#f92672>-</span> m);<span style=color:#75715e>// 统计1...n-m
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// 统计完相减
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// for (int i = 0; i &lt; 5; ++i)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// {
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// 	printf(&#34;%d &#34;, co_1[i]);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// }
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// printf(&#34;\n&#34;);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// for (int i = 0; i &lt; 5; ++i)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// {
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// 	printf(&#34;%d &#34;, co_2[i]);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// }
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// printf(&#34;\n&#34;);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>int</span> ans <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>int</span> r_2[] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>8</span>}; <span style=color:#75715e>// 观察发现，2^i的尾数循环出现（除了2^0尾数是1外，其余情况尾数都以6，2, 4, 8...出现）（例如 1，2，4，8，16，32，64）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>int</span> r_3[] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>7</span>}; <span style=color:#75715e>// 3^i的尾数循环出现
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>int</span> r_7[] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>3</span>}; <span style=color:#75715e>// 7^i的尾数循环出现
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>int</span> r_9[] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>9</span>}; <span style=color:#75715e>// 9^i的尾数循环出现
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		ans <span style=color:#f92672>=</span> (ans <span style=color:#f92672>*</span> r_3[(co_1[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> co_2[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>%</span> <span style=color:#ae81ff>4</span>]) <span style=color:#f92672>%</span> <span style=color:#ae81ff>10</span>;
</span></span><span style=display:flex><span>		ans <span style=color:#f92672>=</span> (ans <span style=color:#f92672>*</span> r_7[(co_1[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>-</span> co_2[<span style=color:#ae81ff>3</span>]) <span style=color:#f92672>%</span> <span style=color:#ae81ff>4</span>]) <span style=color:#f92672>%</span> <span style=color:#ae81ff>10</span>;
</span></span><span style=display:flex><span>		ans <span style=color:#f92672>=</span> (ans <span style=color:#f92672>*</span> r_9[(co_1[<span style=color:#ae81ff>4</span>] <span style=color:#f92672>-</span> co_2[<span style=color:#ae81ff>4</span>]) <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span>]) <span style=color:#f92672>%</span> <span style=color:#ae81ff>10</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> (co_1[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> co_2[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&gt;</span> co_1[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> co_2[<span style=color:#ae81ff>2</span>]) {
</span></span><span style=display:flex><span>			<span style=color:#75715e>// 2的数目多于5
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>			ans <span style=color:#f92672>=</span> (ans <span style=color:#f92672>*</span> r_2[((co_1[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> co_2[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>-</span> (co_1[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> co_2[<span style=color:#ae81ff>2</span>])) <span style=color:#f92672>%</span> <span style=color:#ae81ff>4</span>]) <span style=color:#f92672>%</span> <span style=color:#ae81ff>10</span>;
</span></span><span style=display:flex><span>		} <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (co_1[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> co_2[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>&lt;</span> co_1[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>-</span> co_2[<span style=color:#ae81ff>2</span>]) {
</span></span><span style=display:flex><span>			<span style=color:#75715e>// 5的数目多于2
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>			ans <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;<span style=color:#75715e>// 奇数乘以5，尾数依然是5
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		}<span style=color:#75715e>// 2的数目和5的数目相同时乘1，无需乘
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		printf(<span style=color:#e6db74>&#34;%d</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, ans);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></main><div id=comments><hr><script src=https://utteranc.es/client.js repo=KB5201314/KB5201314.github.io issue-term=pathname label='💬 comments 💬' theme=github-light crossorigin=anonymous async></script></div><footer><hr>© imlk 2017 &ndash; 2023 | <a href=https://blog.imlk.top>imlk's blog</a> | <a href=https://github.com/KB5201314/>Github</a> | <a href=mailto:me@imlk.top>Email</a> | <a href=https://beian.miit.gov.cn/>京ICP备 - 2020042968号</a></footer></body></html>