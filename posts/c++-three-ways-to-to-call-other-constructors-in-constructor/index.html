<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>在C++构造函数中转而调用其它构造函数的三种方法 | imlk's blog</title>
<link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel=stylesheet></head><body><header class=header><a class=logo href=/>imlk's Blog</a><nav><ul class=menu><li><a href=/>🏠Home</a></li><li><a href=/about/>👋About</a></li><li><a href=/archives/>📜Archives</a></li><li><a href=/friends/>🔗Friends</a></li><li><a href=/dn42/>🕸️DN42</a></li><li><a href=/index.xml>📢Subscribe</a></li></ul></nav></header><hr><div class=article-meta><h1><span class=title>在C++构造函数中转而调用其它构造函数的三种方法</span></h1><span><span class=date>📅 2018-01-19</span>
<span class=date>(更新于2021-10-10)</span>
/
<span class=cats>📚
<a href=https://blog.imlk.top/categories/c/c++/>C/C++</a>
</span>/
<span class=tags>🏷️
<a href=https://blog.imlk.top/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/>#编程语言</a>
<a href=https://blog.imlk.top/tags/c++/>#C++</a></span></span><br></div><main class=post-content><h2 id=c构造函数中转而调用其它构造函数的三种方法><strong>C++构造函数中转而调用其它构造函数的三种方法</strong></h2><p><strong>0x00 在初始化列表中调调用另一个构造函数</strong></p><pre tabindex=0><code>/**
*	warning: delegating constructors only available with -std=c++11 or -std=gnu++11
*/
</code></pre><pre tabindex=0><code>	Teacher::Teacher(): Teacher(&#34;unknown&#34;,30) {}
</code></pre><p><strong>0x01 使用this指针显式调用构造函数</strong></p><pre tabindex=0><code>/**
*	经过实践发现g++似乎不能这么用
*	error: cannot call constructor ‘Teacher::Teacher’ directly
*	参见：
*	https://stackoverflow.com/questions/9253619/c-cannot-call-constructor-directly
*/	
</code></pre><pre tabindex=0><code>	Teacher::Teacher() {
		this-&gt;Teacher::Teacher(&#34;unknown&#34;,30);//此方法必须加上作用域
	}	
</code></pre><p><strong>0x02 原始内存覆盖</strong></p><pre tabindex=0><code>/**
*	使用new (void*p) ClassType(param...)，这种语句的意思是不重新分配内存，而是直接覆盖在原内存上。
*	参见：
*	https://www.jianshu.com/p/4af119c44086
*/
</code></pre><pre tabindex=0><code>	Teacher::Teacher():m_iMaxStudentNum(30) {
		new (this) Teacher(&#34;unknown&#34;,30);
	}
</code></pre></main><div id=comments><hr><script src=//geoip-js.com/js/apis/geoip2/v2.1/geoip2.js type=text/javascript></script><script>var onSuccess=function(e){var t=e.country.names["zh-CN"],n=e.country.iso_code;if(!n)return;t&&(document.getElementById("comments-blocked-country-code").innerHTML=t),n=="CN"&&(document.getElementById("comments-shown").style.display="none",document.getElementById("comments-blocked").style.display="")},onError=function(){};geoip2.country(onSuccess,onError)</script><div id=comments-blocked style=font-style:italic;color:#777;display:none>评论区已关闭。<span style=float:right>来自 <span id=comments-blocked-country-code>unknown</span> 的访客
<span>&nbsp; - powered by: geoip-js.com</span></span></div><div id=comments-shown><script src=https://utteranc.es/client.js repo=KB5201314/KB5201314.github.io issue-term=pathname label='💬 comments 💬' theme=github-light crossorigin=anonymous async></script></div></div><footer class=footer><hr>© imlk 2017 &ndash; 2023 | <a href=https://blog.imlk.top>imlk's blog</a> | <a href=https://github.com/KB5201314/>Github</a> | <a href=mailto:me@imlk.top>Email</a> | <a href=https://beian.miit.gov.cn/>京ICP备2020042968号-1</a></footer></body></html>