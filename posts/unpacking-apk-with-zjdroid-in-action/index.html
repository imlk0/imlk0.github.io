<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>è®°ä¸€æ¬¡ZjDroidè„±å£³å®æˆ˜ | imlk's blog</title>
<link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel=stylesheet></head><body><header class=header><a class=logo href=/>imlk's Blog</a><nav><ul class=menu><li><a href=/>ğŸ Home</a></li><li><a href=/about/>ğŸ‘‹About</a></li><li><a href=/archives/>ğŸ“œArchives</a></li><li><a href=/friends/>ğŸ”—Friends</a></li><li><a href=/dn42/>ğŸ•¸ï¸DN42</a></li><li><a href=/index.xml>ğŸ“¢Subscribe</a></li></ul></nav></header><hr><div class=article-meta><h1><span class=title>è®°ä¸€æ¬¡ZjDroidè„±å£³å®æˆ˜</span></h1><span><span class=date>ğŸ“… 2018-04-28</span>
<span class=date>(æ›´æ–°äº2023-12-05)</span>
/
<span class=cats>ğŸ“š
<a href=https://blog.imlk.top/categories/reverse/>Reverse</a>
</span>/
<span class=tags>ğŸ·ï¸
<a href=https://blog.imlk.top/tags/%E7%9E%8E%E6%90%9E/>#çæ</a>
<a href=https://blog.imlk.top/tags/zjdroid/>#ZjDroid</a></span></span><br></div><main class=post-content><p>çœ‹äº†é‚£ä¹ˆå¤šé€†å‘ç ´è§£çš„æ–‡ç« ï¼Œæ€»å¾—æ¥ç‚¹å®æˆ˜çš„äº†ï¼Œæ­£æ‰€è°“å®è·µå‡ºçœŸçŸ¥å˜›ã€‚</p><p>æ‹œè¯»äº†å§œç»´å¤§ç¥çš„<a href=https://blog.csdn.net/jiangwei0910410003/article/details/52840602>ã€ŒAndroidä¸­Xposedæ¡†æ¶ç¯‡&mdash;åŸºäºXposedçš„ä¸€æ¬¾è„±å£³ç¥å™¨ZjDroidå·¥å…·åŸç†è§£æã€</a>ï¼Œå‡†å¤‡æ¥ä¸ªåº”ç”¨åŠ¨æ‰‹è¯•è¯•äº†ï¼Œæƒ³èµ·æˆ‘è‡ªå·±ä¹‹å‰æœ‰ä¸ªåº”ç”¨æ°å¥½æ˜¯å¤§æ•°å­—åŠ å›ºçš„ï¼Œäºæ˜¯æƒ³è¯•è¯•ç ´è‡ªå·±çš„åº”ç”¨ã€‚
(çº¯ç²¹æ˜¯ä¸ªäººé»‘å†å²ï¼Œå°±ä¸è´´åº”ç”¨é“¾æ¥äº†)ã€‚</p><h3 id=ç¯å¢ƒ>ç¯å¢ƒ</h3><p>æˆ‘æ‰‹å¤´çš„è®¾å¤‡æ˜¯ç‰ˆæœ¬æ˜¯ Android7.1.2 ç”µè„‘ä¸Šä¹Ÿæœ‰Android4.4ç‰ˆæœ¬çš„æ¨¡æ‹Ÿå™¨ï¼ˆAndroid Emulatorï¼Œå·²rootå’Œåˆ·å…¥Xposedï¼Œä¸çŸ¥é“æ€ä¹ˆæ‰‹åŠ¨ç»™æ¨¡æ‹Ÿå™¨åˆ·rootçš„åŒå­¦å‚è€ƒè¿™ä¸ª<a href=https://android.stackexchange.com/questions/171442/root-android-virtual-device-with-android-7-1-1>https://android.stackexchange.com/questions/171442/root-android-virtual-device-with-android-7-1-1</a>ï¼‰</p><h3 id=å‡†å¤‡>å‡†å¤‡</h3><p>é¦–å…ˆå˜›ï¼Œå½“ç„¶æ˜¯è¦ä¸‹è½½å¤§åé¼é¼çš„ZjDroidæ¨¡å—äº†ï¼Œè¿™ä¸ªè„±å£³å·¥å…·æ˜¯åŸºäºXposedæ¨¡å—çš„ï¼Œçœ‹äº†ä¸‹è¯¥é¡¹ç›®çš„githubï¼Œä¼¼ä¹å¹¶æ²¡æœ‰ç»™å‡ºZjDroidç°æˆçš„apkå®‰è£…åŒ…ï¼Œç½‘ä¸Šè™½ç„¶æ˜¯æœ‰æ‰¾ï¼Œä½†æˆ‘è¿˜æ˜¯é€‰æ‹©è‡ªå·±æ‰‹åŠ¨ç¼–è¯‘äº†ä¸€ä¸‹ï¼Œ</p><p>clone
å¯¼å…¥AS</p><p>åœ¨è§£å†³äº†~å‡ ä¸ªé—®é¢˜~å¾ˆå¤šä¸ªé—®é¢˜ä»¥åæ€»ç®—æ˜¯ç¼–è¯‘æˆåŠŸäº†ã€‚</p><p><strong>ä¸»è¦æ˜¯ä¸ºäº†è§£å†³å¯¼å…¥åº“çš„é—®é¢˜å’Œ<code>multidex</code>çš„é—®é¢˜ï¼ˆä¸ºäº†æ”¯æŒä½sdkç‰ˆæœ¬çš„è®¾å¤‡ï¼‰</strong></p><p><strong>ä¹Ÿç®—æ˜¯å­¦ä¹ äº†</strong></p><h3 id=åœ¨è„±å£³çš„è¾¹ç¼˜è¯•æ¢>åœ¨è„±å£³çš„è¾¹ç¼˜è¯•æ¢</h3><p>æŠŠç¼–è¯‘å¥½çš„apkè£…è¿›æˆ‘çš„æ‰‹æœºï¼ˆAndroid 7.1.2ï¼‰ï¼Œæ¿€æ´»æ¨¡å—é‡å¯ï¼Œè¿ä¸Šç”µè„‘ï¼ŒæŒ‰ç…§æ•™ç¨‹é‡Œçš„æ–¹æ³•ï¼Œå¯åŠ¨ä¿©<code>cmd</code>ä¸€ä¸ªç”¨æ¥çœ‹<code>logcat</code>è¾“å‡ºï¼Œä¸€ä¸ªç”¨æ¥å‘é€å¹¿æ’­æ‰§è¡ŒæŒ‡ä»¤ï¼Œ</p><p>è¯•äº†ä¸€ä¸ªï¼š
æŸ¥çœ‹dexä¿¡æ¯</p><pre tabindex=0><code>am broadcast -a com.zjdroid.invoke --ei target 18881 --es cmd &#39;{action:dump_dexinfo}&#39;
</code></pre><p><code>logcat</code>è¾“å‡ºæ˜¯</p><pre tabindex=0><code>04-27 21:00:19.798 12563 12563 D zjdroid-shell-com.imlk.BlackAndWhite: the cmd = dump_dexinfo
04-27 21:00:19.805 12563 13323 D zjdroid-shell-com.imlk.BlackAndWhite: The DexFile Infomation -&gt;
04-27 21:00:19.805 12563 13323 D zjdroid-shell-com.imlk.BlackAndWhite: filepath:/data/app/com.imlk.BlackAndWhite-1/base.apk mCookie:-1
04-27 21:00:19.807 12563 13323 D zjdroid-shell-com.imlk.BlackAndWhite: End DexFile Infomation
</code></pre><p>ä¼¼ä¹æœ‰ä»€ä¹ˆå¥‡å¥‡æ€ªæ€ªçš„åœ°æ–¹ã€‚ã€‚
<code>mCookie</code>çš„å€¼æ˜¯<code>-1</code>ï¼Œä¸è¿‡çœ‹æ•™ç¨‹é‡Œé¢å¥½åƒæ˜¯ä¸€ä¸²æ²¡æœ‰è§„å¾‹çš„æ•°å­—å“‡ã€‚å¿ƒæƒ³å¯èƒ½æ˜¯å¤§æ•°å­—åˆå‡çº§äº†ï¼Œè¿™ç§æ–¹æ¡ˆè„±å£³å¯èƒ½ä¸èƒ½å¥æ•ˆã€‚</p><p>ä¸ç®¡äº†ï¼Œç»§ç»­è¯•è¯•ï¼š</p><pre tabindex=0><code> am broadcast -a com.zjdroid.invoke --ei target 8880 --es cmd &#39;{&#34;action&#34;:&#34;backsmali&#34;,&#34;dexpath&#34;:&#34;/data/app/com.imlk.BlackAndWhite-1/base.apk&#34;}&#39;
</code></pre><p>WTF!
ç¨‹åºé€€å‡ºäº†ï¼
çœ‹ä¸‹<code>logcat</code>é‡Œçš„è¾“å‡º</p><pre tabindex=0><code>04-27 22:16:56.475 18342 18342 D zjdroid-shell-com.imlk.BlackAndWhite: the cmd = backsmali
04-27 22:16:56.487 18342 18734 D zjdroid-shell-com.imlk.BlackAndWhite: start disassemble the mCookie -1
</code></pre><p>ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
æˆ›ç„¶è€Œæ­¢ï¼Ÿï¼Ÿï¼Ÿ</p><p>ç¬¬ä¸€æ—¶é—´æƒ³åˆ°è‚¯å®šå’Œé‚£ä¸ª<code>-1</code>æœ‰å…³ç³»ï¼Œåæ­£æ‰‹å¤´æœ‰<code>ZjDroid</code>çš„æºç ï¼Œçœ‹çœ‹åˆ°åº•æ˜¯å“ªé‡Œå´©äº†ã€‚
å­—ç¬¦ä¸²æœç´¢ï¼Œèµ°èµ·ï¼</p><h3 id=åœ¨ä¿®å¤çš„è¾¹ç¼˜è¯•æ¢>åœ¨ä¿®å¤çš„è¾¹ç¼˜è¯•æ¢</h3><p>é¦–å…ˆæƒ³çœ‹çœ‹æ‰§è¡Œ<code>dump_dexinfo</code>å‘½ä»¤çš„æ—¶å€™ï¼Œè¾“å‡ºçš„é‚£ä¸ª<code>-1</code>ç©¶ç«Ÿæ˜¯å“ªé‡Œæ¥çš„ï¼Œ
åˆ°<code>ZjDroid</code>çš„æºç é‡Œæœç´¢<code>mCookie:</code>
ï¼ˆè¿™é‡Œæœ‰ä¸€ä¸ªå°æŠ€å·§ï¼Œåˆ°<code>github</code>çš„é¡¹ç›®é¦–é¡µï¼Œé¡¶æ å¯ä»¥æŒ‡å®šåœ¨è¿™ä¸ªé¡¹ç›®é‡Œæœç´¢ï¼‰ï¼Œ</p><p>æœç„¶æœåˆ°ä¸€å¤„<code>com.android.reverse.request.DumpDexInfoCommandHandler</code>ä¸­çš„<code>doAction()</code>æ–¹æ³•è¾“å‡ºäº†è¿™ä¸ª<code>-1</code></p><pre tabindex=0><code>public class DumpDexInfoCommandHandler implements CommandHandler {

	@Override
	public void doAction() {
		HashMap&lt;String, DexFileInfo&gt; dexfileInfo = DexFileInfoCollecter.getInstance().dumpDexFileInfo();
		Iterator&lt;DexFileInfo&gt; itor = dexfileInfo.values().iterator();
		DexFileInfo info = null;
		Logger.log(&#34;The DexFile Infomation -&gt;&#34;);
		while (itor.hasNext()) {
			info = itor.next();
			Logger.log(&#34;filepath:&#34;+ info.getDexPath()+&#34; mCookie:&#34;+info.getmCookie()); //è¿™é‡Œè¾“å‡ºå•¦
		}
		Logger.log(&#34;End DexFile Infomation&#34;);
	}

}
</code></pre><p>åˆ°asé‡Œé¢å®šä½åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œæº¯æºåˆ°<code>com.android.reverse.collecter.DexFileInfoCollecter</code>çš„<code>dumpDexFileInfo()</code>æ–¹æ³•</p><pre tabindex=0><code>	public HashMap&lt;String, DexFileInfo&gt; dumpDexFileInfo() {
		HashMap&lt;String, DexFileInfo&gt; dexs = new HashMap&lt;String, DexFileInfo&gt;(dynLoadedDexInfo);
		Object dexPathList = RefInvoke.getFieldOjbect(&#34;dalvik.system.BaseDexClassLoader&#34;, pathClassLoader, &#34;pathList&#34;);
		Object[] dexElements = (Object[]) RefInvoke.getFieldOjbect(&#34;dalvik.system.DexPathList&#34;, dexPathList, &#34;dexElements&#34;);
		DexFile dexFile = null;
		for (int i = 0; i &lt; dexElements.length; i++) {
			dexFile = (DexFile) RefInvoke.getFieldOjbect(&#34;dalvik.system.DexPathList$Element&#34;, dexElements[i], &#34;dexFile&#34;);
			String mFileName = (String) RefInvoke.getFieldOjbect(&#34;dalvik.system.DexFile&#34;, dexFile, &#34;mFileName&#34;);
			int mCookie = RefInvoke.getFieldInt(&#34;dalvik.system.DexFile&#34;, dexFile, &#34;mCookie&#34;); //è¿™é‡Œé€šè¿‡åå°„è·å–&#34;mCookie&#34;è¿™ä¸ªintç±»å‹çš„å˜é‡
			DexFileInfo dexinfo = new DexFileInfo(mFileName, mCookie, pathClassLoader);
			dexs.put(mFileName, dexinfo);
		}
		return dexs;
	}
</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼š
æºç ä¸­ï¼Œé€šè¿‡åå°„è·å–"mCookie"è¿™ä¸ªintç±»å‹çš„å˜é‡ï¼Œç„¶åç»“æœå¾—åˆ°çš„æ˜¯<code>-1</code>ï¼Œçœ‹åˆ°è¿™é‡Œæˆ‘ä¹Ÿæ²¡å¤šæƒ³ï¼Œå°±æƒ³å»éªŒè¯è¿™ä¸ªå˜é‡æ˜¯å¦çœŸçš„æ˜¯<code>-1</code></p><p>æƒ³è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œé¦–å…ˆæˆ‘æƒ³åˆ°çš„æ˜¯ç”¨asåŠ¨æ€è°ƒè¯•ä¸€æ³¢èµ°èµ·ã€‚</p><h3 id=å°è¯•ç”¨åŠ¨æ€è°ƒè¯•æ‰¾å‡º-1>å°è¯•ç”¨åŠ¨æ€è°ƒè¯•æ‰¾å‡º-1</h3><p>ç»“åˆä¸Šé¢çš„ä»£ç ï¼Œå¯ä»¥æ€»ç»“å‡ºï¼Œåº”è¯¥æ˜¯
BaseDexClassLoaderä¸­çš„
dexElementsæ•°ç»„ä¸­çš„å…ƒç´ ä¸­çš„
dexFileä¸­çš„
mCookie</p><p>éšä¾¿ä¸‹ä¸ªæ–­ç‚¹ï¼Œæ–¹ä¾¿èµ·è§ï¼Œæˆ‘ç»å¸¸ä¸‹çš„æ–­ç‚¹å°±æ˜¯<code>OnClickListener</code>æ¥å£ä¸­çš„<code>onClick</code>æ–¹æ³•ï¼Œæ³¨æ„ç»™<strong>æ¥å£ä¸­çš„æ–¹æ³•</strong>ä¸‹æ–­ç‚¹çš„è¯ï¼Œæ‰€æœ‰çš„å®ç°äº†è¿™ä¸ª<strong>æ¥å£æ–¹æ³•</strong>ç±»çš„è¿™ä¸ªæ–¹æ³•éƒ½èƒ½è¢«<code>debug</code>æ•æ‰åˆ°ï¼Œ</p><p>è¿™æ ·ä¸éœ€è¦ä¿®æ”¹æºç¨‹åºï¼Œå°±èƒ½è½»æ¾çš„ä¸‹æ–­ç‚¹ï¼Œ
æˆ‘ä»¬åªè¦ç‚¹å‡»ä»»æ„ä¸€ä¸ªå¯ç‚¹å‡»çš„<code>view</code>è§¦å‘äº†å®ƒçš„<code>onClick</code>æ–¹æ³•ï¼Œè°ƒè¯•å™¨å°±èƒ½æ•æ‰åˆ°ï¼Œä¹‹åæˆ‘ä»¬å°±èƒ½ä»»æ„æŸ¥çœ‹å†…å®¹äº†ã€‚</p><p>è°ƒè¯•å™¨ä¸­æ’å…¥ä»£ç ï¼ŒæŸ¥çœ‹å†…å®¹
<img src=/images/blog/40_0.png alt=è°ƒè¯•å™¨æŸ¥çœ‹å†…å®¹></p><p>WTF!!!
<code>mCookie</code>å±…ç„¶æ˜¯ä¸ª<code>Long[]</code>ï¼Œè¯´å¥½çš„<code>int</code>å‘¢ï¼
<img src=/images/blog/40_1.png alt="æŸ¥çœ‹ mCookie è¿™ä¸ªæˆå‘˜å˜é‡çš„ç±»å‹"></p><p>å±…ç„¶æ˜¯Objectï¼</p><p>å›å»çœ‹ZjDroidæºç ï¼Œä»<code>getFieldInt</code>æ–¹æ³•åˆ‡å…¥</p><pre tabindex=0><code>			int mCookie = RefInvoke.getFieldInt(&#34;dalvik.system.DexFile&#34;, dexFile, &#34;mCookie&#34;);
</code></pre><pre tabindex=0><code>	public static int getFieldInt(String class_name,Object obj, String filedName){
		try {
			Class obj_class = Class.forName(class_name);
			Field field = obj_class.getDeclaredField(filedName);
			field.setAccessible(true);
			return field.getInt(obj);
		} catch (SecurityException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (NoSuchFieldException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (IllegalArgumentException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (IllegalAccessException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (ClassNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		return -1; //è¿™é‡Œï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼
		
	}
</code></pre><p>ä¼¼ä¹æ˜¯è°ƒç”¨<code>Field</code>ç±»å‹çš„å¯¹è±¡çš„<code>getInt()</code>æ–¹æ³•å‘ç”Ÿäº†å¼‚å¸¸ï¼ˆè‚¯å®šä¼šå‘ç”Ÿå¼‚å¸¸å•¦ï¼Œè¿™ä¸ªå˜é‡éƒ½æ˜¯ä¸ªæ•°ç»„ï¼Œä¸å¯èƒ½å¾—åˆ°<code>int</code>ç±»å‹ï¼Œå¼‚å¸¸ä¹Ÿæ˜¯æƒ…ç†ä¹‹ä¸­çš„ï¼‰ï¼Œ
å‘ç”Ÿå¼‚å¸¸ä»¥åï¼Œåªèƒ½è¾“å‡º <code>-1</code> äº†ï¼Œ</p><p>ç”¨åŒæ ·çš„åŠ¨æ€è°ƒè¯•æ–¹æ³•ï¼Œå¯¹<code>Android 4.4çš„æ¨¡æ‹Ÿå™¨è¿›è¡Œæµ‹è¯•</code>ï¼š
<img src=/images/blog/40_2.png alt=è°ƒè¯•å™¨æŸ¥çœ‹å†…å®¹ï¼ŒAndroid4.4>
<img src=/images/blog/40_3.png alt="æŸ¥çœ‹ mCookie è¿™ä¸ªæˆå‘˜å˜é‡çš„ç±»å‹"></p><p>çœ‹æ¥åº”è¯¥æ˜¯<code>art</code>è™šæ‹Ÿæœºå’Œ<code>dalvik</code>è™šæ‹Ÿæœºçš„ä¸åŒé€ æˆçš„ï¼Œåœ¨Android4.4ä¸Šé¢è¿™ä¸ªå˜é‡æ˜¯<code>int</code>ç±»å‹çš„ï¼Œ</p><p>ä¸è¿‡æˆ‘å€’æ˜¯æ¥äº†å…´è¶£ï¼Œæƒ³è¯•è¯•èƒ½ä¸èƒ½ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œä¸è¿‡è¿™å°±è¦å¯¹<code>mCookie</code>æ·±å…¥ç ”ç©¶ç ”ç©¶äº†ã€‚</p><h3 id=ç¬¬äºŒå¤©>ç¬¬äºŒå¤©</h3><p>èµ·åºŠæœäº†æœèµ„æ–™ï¼Œç½‘ä¸Šä¹Ÿæœ‰å¥½å¤šäººé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚</p><p>ä¸è¿‡å…³äº<code>mCookie</code>çš„è¯¦ç»†å™è¿°å€’æ˜¯æ²¡å¤šå°‘</p><p>é€€å›åŸç‚¹ï¼Œçœ‹çœ‹å´©æºƒæ—¶çš„å¼‚å¸¸ï¼š</p><pre tabindex=0><code>    --------- beginning of crash
04-28 10:31:34.468 17165-20179/com.imlk.BlackAndWhite E/AndroidRuntime: FATAL EXCEPTION: Thread-3
    Process: com.imlk.BlackAndWhite, PID: 17165
    java.lang.UnsatisfiedLinkError: dalvik.system.PathClassLoader[DexPathList[[zip file &#34;/data/app/com.android.reverse-1/base.apk&#34;],nativeLibraryDirectories=[/system/lib, /vendor/lib]]] couldn&#39;t find &#34;libdvmnative.so&#34;
        at java.lang.Runtime.loadLibrary0(Runtime.java:984)
        at java.lang.System.loadLibrary(System.java:1562)
        at com.android.reverse.util.NativeFunction.&lt;clinit&gt;(NativeFunction.java:19)
        at com.android.reverse.smali.MemoryBackSmali.disassembleDexFile(MemoryBackSmali.java:76)
        at com.android.reverse.collecter.DexFileInfoCollecter.backsmaliDexFile(DexFileInfoCollecter.java:141)
        at com.android.reverse.request.BackSmaliCommandHandler.doAction(BackSmaliCommandHandler.java:19)
        at com.android.reverse.mod.CommandBroadcastReceiver$1.run(CommandBroadcastReceiver.java:33)
        at java.lang.Thread.run(Thread.java:761)
</code></pre><p>è¯´æ‰¾ä¸åˆ°è¿™ä¸ª<code>libdvmnative.so</code></p><p>è€Œè¿™ä¸ªæ–‡ä»¶æ˜¯åœ¨ZjDroidé¡¹ç›®é‡Œçš„ï¼Œçœ‹çœ‹ç¼–è¯‘å‡ºçš„apk</p><p>é‡Œé¢æ˜¯æœ‰è¿™ä¸ªä¸œè¥¿çš„ï¼ŒçœŸæ˜¯å¥‡äº†æ€ªäº†ï¼Œxposedæ¡†æ¶ç«Ÿç„¶æ²¡å¸®æˆ‘æŠŠsoæ–‡ä»¶åŠ è½½è¿›å»ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</p><p>åé¢å‘ç°æ˜¯å¹³å°çš„åŸå› ï¼Œæˆ‘çš„æ¨¡æ‹Ÿå™¨æ˜¯x86çš„ï¼Œapké‡Œåªæœ‰armçš„æºç </p><h3 id=æš‚æ—¶å¤±è´¥å‘Šç»ˆ>æš‚æ—¶å¤±è´¥å‘Šç»ˆ</h3><p>å“‡ï¼Œçœ‹äº†ä¸€ä¸‹ï¼Œè¿™<code>art</code>å’Œ<code>dalvik</code>çš„åŒºåˆ«è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œä»…ä»…æ˜¯ä¿®å¤è¿™äº›Javaå±‚çš„ä»£ç æ˜¯è¡Œä¸é€šçš„ï¼Œå› ä¸ºå®ƒè¿™é‡Œå¥½å‡ ä¸ªåœ°æ–¹ç”¨åˆ°äº†soä¸­çš„<code>native</code>æ–¹æ³•ï¼Œè¿™äº›æ˜¯ä¸å¼€æºçš„ä¸œè¥¿ï¼Œæƒ³ä¿®æ”¹ä¹Ÿä¿®æ”¹ä¸äº†ã€‚Android7.1.2ä¸Šçš„å°è¯•åªå¥½æ”¾å¼ƒäº†ã€‚</p><p>ä¸è¿‡è¿™é‡Œè¿˜æ˜¯å­¦åˆ°äº†ä¸€äº›ä¸œè¥¿ï¼Œä¹Ÿç¬¬ä¸€æ¬¡å°è¯•äº†multidexï¼Œä½†æ˜¯åœ¨Android4.4ä¸Šå¥½åƒå¾—è‡ªå·±æ‰‹åŠ¨åŠ è½½ä½™ä¸‹çš„dexï¼Œè¿˜çœŸè®©äººå¤´ç–¼å•Šã€‚</p><h3 id=èˆ¹æ–°ç‰ˆæœ¬>èˆ¹æ–°ç‰ˆæœ¬</h3><p><code>github</code>çœŸçš„ä¸‡èƒ½å•Šï¼ï¼</p><p>æåˆ°äº†<code>native</code>éƒ¨åˆ†çš„æºç ï¼</p><p>æ˜¯ä»ä¸€ä¸ªå«<code>HeyGirl</code>çš„é¡¹ç›®é‡Œæåˆ°çš„ï¼Œè¿™ä¸ªé¡¹ç›®è²Œä¼¼æ˜¯forkçš„æœ€æ—©ç‰ˆæœ¬çš„ZjDroidï¼Œï¼ˆä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› åŸé¡¹ç›®å·²ä¸å­˜åœ¨ï¼‰ï¼Œæ€»ä¹‹ä»é‡Œé¢æåˆ°äº†nativeçš„æºç ï¼Œå¯ä»¥å­¦ä¹ ä¸€æ³¢å•¦</p><p>åˆæ‰¾æ¥äº†<code>luajava</code>çš„æºç ï¼Œå‡‘åœ¨ä¸€èµ·åŸºæœ¬ä¸Šå°±æ˜¯åŸç‰ˆçš„ZjDroidäº†ã€‚</p><p>æˆ‘ä¸ºä»€ä¹ˆè¦è´¹å·¥å¤«æ‰¾è¿™äº›æºç ï¼Ÿï¼Ÿï¼Ÿ</p><p>å› ä¸ºgithubä¸Šé¢çš„ZjDroidä¸­åªæœ‰armå¹³å°çš„soæ–‡ä»¶ï¼Œè€Œæˆ‘çš„è™šæ‹Ÿæœºæ˜¯x86çš„ï¼Œæ²¡æ³•ç”¨ï¼Œæç¤ºæ‰¾ä¸åˆ°soæ–‡ä»¶ã€‚</p><h3 id=ç»§ç»­å°è¯•è„±>ç»§ç»­å°è¯•è„±</h3><p>è¾“å…¥ï¼š</p><pre tabindex=0><code>adb logcat -s zjdroid-shell-com.imlk.BlackAndWhite
</code></pre><p>logcatï¼š</p><pre tabindex=0><code>--------- beginning of /dev/log/system
--------- beginning of /dev/log/main
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): the package = com.imlk.BlackAndWhite has hook
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): the app target id = 3717
</code></pre><p>è¾“å…¥ï¼š</p><pre tabindex=0><code>am broadcast -a com.zjdroid.invoke --ei target 3717 --es cmd &#39;{action:dump_dexinfo}&#39;
</code></pre><p>logcatï¼š</p><pre tabindex=0><code>D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): the cmd = dump_dexinfo
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): The DexFile Infomation -&gt;
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): filepath:/data/app/com.imlk.BlackAndWhite-1.apk mCookie:-1204615840
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): End DexFile Infomation
</code></pre><p>è¾“å…¥</p><pre tabindex=0><code>am broadcast -a com.zjdroid.invoke --ei target 3717 --es cmd &#39;{&#34;action&#34;:&#34;backsmali&#34;,&#34;dexpath&#34;:&#34;/data/app/com.imlk.BlackAndWhite-1.apk&#34;}&#39;
</code></pre><p>è¾“å‡º</p><pre tabindex=0><code>D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): the cmd = backsmali
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): start disassemble the mCookie -1203426560
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): dvmnative
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): dvmnative
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): the dexfile header item info start--&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): the stringStartOffset =112
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): the typeStartOffset =2312
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): the protoStartOffset =2800
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): the fieldStartOffset =4636
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): the methodStartOffset =5156
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): the classStartOffset =8028
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): the classCount =21
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): the dexfile header item info end&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;--
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): end disassemble the mCookie: cost time = 3s
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): start build the smali files to dex
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): build the dexfile ok
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): end build the smali files to dex: cost time = 0s
D/zjdroid-shell-com.imlk.BlackAndWhite( 3717): the dexfile data save to =/data/data/com.imlk.BlackAndWhite/files/dexfile.dex
</code></pre><p>æ¿€åŠ¨ï¼ï¼ï¼
ä¼¼ä¹æ˜¯æˆåŠŸäº†ï¼Œæˆ‘ä»¬å»çœ‹çœ‹åœ¨ç›®æ ‡è·¯å¾„ä¸‹æœ‰æ²¡æœ‰æˆ‘ä»¬è¦çš„æ–‡ä»¶ï¼š
å“‡æ˜¯çœŸçš„æœ‰ï¼ï¼</p><pre tabindex=0><code>root@generic_x86:/data/data/com.imlk.BlackAndWhite/files # ll
-rw------- u0_a60   u0_a60      12920 2018-04-29 10:44 dexfile.dex
</code></pre><p>å¿«å¿«<code>adb pull</code>å‡ºæ¥ç§ç§</p><p>å…ˆç”¨dex2jarå¤„ç†ï¼Œç„¶åç”¨jd-guiæŸ¥çœ‹ã€‚ã€‚ã€‚</p><p><img src=/images/blog/40_4.png alt=è„±å‡ºæ¥çš„ä¸œè¥¿></p><p>æˆ‘æ“¦è¿™ä¸å°±æ˜¯å£³å­å—ï¼Ÿé€—æˆ‘å§ï¼ï¼ï¼</p><h3 id=ç»§ç»­ç ”ç©¶>ç»§ç»­ç ”ç©¶</h3><p>ç ”ç©¶å‘ç°</p><p>åŠ å›ºåº”ç”¨åœ¨åŠ è½½ä»¥åä¼šåŠ¨æ€åŠ è½½ä¸¤ä¸ªdexï¼Œæ‰€ä»¥åŠ ä¸Šapkï¼Œä¸€å…±æœ‰ä¸‰ä¸ª<code>DexFile</code></p><p>å¯ä»¥é€šè¿‡ç”¨asè°ƒè¯•çœ‹å‡ºæ¥ï¼š</p><p>è¿™é‡Œçš„dexElementsçš„æ¥æºæ˜¯ï¼š</p><pre tabindex=0><code>ClassLoader-&gt;pathList-&gt;dexElements
</code></pre><pre tabindex=0><code>dexElements = {DexPathList$Element[3]@831564034400} 
	0 = {DexPathList$Element@831564034360} &#34;dex file &#34;dalvik.system.DexFile@9d139c78&#34;&#34;
		dexFile = {DexFile@831563996280} 
			guard = {CloseGuard@831559184936} 
			mFileName = &#34;/data/app/com.imlk.BlackAndWhite-1.apk&#34;
			mCookie = -1192464816
		file = null
		zipFile = null
		zip = null
		isDirectory = false
		initialized = false
	1 = {DexPathList$Element@831564033672} &#34;dex file &#34;dalvik.system.DexFile@9d13a810&#34;&#34;
		dexFile = {DexFile@831563999248} 
			guard = {CloseGuard@831559184936} 
			mFileName = &#34;/data/app/com.imlk.BlackAndWhite-1.apk&#34;
			mCookie = -1192527312
		file = null
		zipFile = null
		zip = null
		isDirectory = false
		initialized = false
	2 = {DexPathList$Element@831563727296} &#34;zip file &#34;/data/app/com.imlk.BlackAndWhite-1.apk&#34;&#34;
		dexFile = {DexFile@831563726992} 
			guard = {CloseGuard@831559184936} 
			mFileName = &#34;/data/app/com.imlk.BlackAndWhite-1.apk&#34;
			mCookie = -1193659808
		file = {File@831563726728} &#34;/data/app/com.imlk.BlackAndWhite-1.apk&#34;
		zipFile = null
		zip = {File@831563726728} &#34;/data/app/com.imlk.BlackAndWhite-1.apk&#34;
		isDirectory = false
		initialized = false
</code></pre><p>ä½†æ˜¯åŸç‰ˆçš„<code>ZjDroid</code>é»˜è®¤æ˜¯ä»¥æ–‡ä»¶åç§°<code>mFileName</code>ä¸ºé”®<code>key</code>ï¼Œåœ¨ä¸€ä¸ª<code>map</code>ä¸­ä¿å­˜åŠ è½½äº†çš„dexæ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯çš„ï¼Œè¿™å¯¼è‡´ä¸‰ä¸ªæ–‡ä»¶åªè¢«ä¿å­˜äº†ä¸€ä¸ªä¿¡æ¯ï¼Œäºæ˜¯æˆ‘é­”æ”¹äº†ä¸€ä¸‹ï¼Œè®©<code>ZjDroid</code>å°†<code>mCookie</code>ä½œä¸ºé”®ï¼Œå‘é€çš„å‘½ä»¤ä¹Ÿé€šè¿‡æŒ‡å®š<code>mCookie</code>çš„å€¼æ¥dumpæˆ‘ä»¬è¦çš„æ–‡ä»¶ï¼Œè¿™æ ·å°±è§£å†³äº†å†²çªé—®é¢˜ã€‚</p><p>é­”æ”¹ç‰ˆæœ¬
imlk0/ZjDroidï¼š
<a href=https://github.com/imlk0/ZjDroid>https://github.com/imlk0/ZjDroid</a></p><h3 id=è„±>è„±ï¼</h3><p>åˆ°è¿™ä¸€æ­¥å¯ä»¥è¯´æ˜¯éå¸¸niceäº†ã€‚</p><p>å¯åŠ¨æ—¶çš„è¾“å‡ºï¼š</p><pre tabindex=0><code>D/zjdroid-shell-com.imlk.BlackAndWhite( 3525): the package = com.imlk.BlackAndWhite has hook
D/zjdroid-shell-com.imlk.BlackAndWhite( 3525): the app target id = 3525
D/zjdroid-shell-com.imlk.BlackAndWhite( 3525): openDexFileNative() is invoked with filepath:/data/app/com.imlk.BlackAndWhite-1.apk result:-1196414688
D/zjdroid-shell-com.imlk.BlackAndWhite( 3525): openDexFileNative() is invoked with filepath:/data/app/com.imlk.BlackAndWhite-1.apk result:-1196412000
</code></pre><p>é‚£ä¸ª<code>result</code>å°±æ˜¯<code>mCookie</code></p><p>çœ‹ä¸€ä¸‹<code>dexinfo</code></p><pre tabindex=0><code>D/zjdroid-shell-com.imlk.BlackAndWhite( 3525): the cmd = dump_dexinfo
D/zjdroid-shell-com.imlk.BlackAndWhite( 3525): The DexFile Infomation -&gt;
D/zjdroid-shell-com.imlk.BlackAndWhite( 3525): filepath:/data/app/com.imlk.BlackAndWhite-1.apk dexElementToString:zip file &#34;/data/app/com.imlk.BlackAndWhite-1.apk&#34; mCookie:-1197778512
D/zjdroid-shell-com.imlk.BlackAndWhite( 3525): filepath:/data/app/com.imlk.BlackAndWhite-1.apk dexElementToString:dex file &#34;dalvik.system.DexFile@9d19c9d0&#34; mCookie:-1196412000
D/zjdroid-shell-com.imlk.BlackAndWhite( 3525): filepath:/data/app/com.imlk.BlackAndWhite-1.apk dexElementToString:dex file &#34;dalvik.system.DexFile@9d19d3c0&#34; mCookie:-1196414688
D/zjdroid-shell-com.imlk.BlackAndWhite( 3525): End DexFile Infomation
</code></pre><p>è¿™å°±æ˜¯æˆ‘é­”æ”¹çš„ç‰ˆæœ¬å•¦ï¼Œå¯ä»¥çœ‹åˆ°<code>dexinfo</code>é‡Œè¿˜æ˜¾ç¤ºäº†å½“å‰æ–‡ä»¶æ˜¯dexæ–‡ä»¶è¿˜æ˜¯zipæ–‡ä»¶ï¼Œä¹Ÿç»™å‡ºäº†<code>mCookie</code></p><p>ä¸‹é¢å¯¹ä¸‰ä¸ªæ–‡ä»¶è¿›è¡Œ<code>dumpdex</code></p><pre tabindex=0><code>am broadcast -a com.zjdroid.invoke --ei target 3525 --es cmd &#39;{&#34;action&#34;:&#34;dump_dexfile&#34;,&#34;mCookie&#34;:&#34;-1197778512&#34;}&#39;
am broadcast -a com.zjdroid.invoke --ei target 3525 --es cmd &#39;{&#34;action&#34;:&#34;dump_dexfile&#34;,&#34;mCookie&#34;:&#34;-1196412000&#34;}&#39;
am broadcast -a com.zjdroid.invoke --ei target 3525 --es cmd &#39;{&#34;action&#34;:&#34;dump_dexfile&#34;,&#34;mCookie&#34;:&#34;-1196414688&#34;}&#39;
</code></pre><p>å¾—åˆ°çš„ä¸‰ä¸ªæ–‡ä»¶å¤§å°ä¸º</p><pre tabindex=0><code>	 Length Name
	 ------ ----
	 359520 dexdump-1197778512.odex
	  39652 dexdump-1196412000.odex
	1051756 dexdump-1196414688.odex
</code></pre><p>ç›´è§‰å‘Šè¯‰æˆ‘æœ€å¤§çš„é‚£ä¸ªåº”è¯¥æ˜¯æˆ‘ä»¬è¦çš„äº†</p><p>ç”¨<code>backsmali.jar</code>å·¥å…·ï¼š</p><pre tabindex=0><code>java -jar E:\toolBox\smali_JesusFreke\baksmali-2.2.2.jar deodex -d .\system\framework\ -o out -a 19 .\dexdump-1196414688.odex
</code></pre><ul><li>å‘½ä»¤æ˜¯<code>deodex</code></li><li>å¦å¤–ï¼Œè¿˜è¦æŒ‡å®šsdkç‰ˆæœ¬ï¼Œ<code>-a</code>å‚æ•°åé¢çš„å°±æ˜¯sdkç‰ˆæœ¬ï¼Œæˆ‘çš„æ¨¡æ‹Ÿå™¨sdkç‰ˆæœ¬æ˜¯19ã€‚</li><li><code>-o</code>æ˜¯æŒ‡å®šè¾“å‡ºçš„æ–‡ä»¶å¤¹</li><li>æ³¨æ„è¿™é‡Œéœ€è¦æŠŠç³»ç»Ÿé‡Œé¢çš„<code>\system\framework\</code>æ–‡ä»¶å¤¹é‡Œé¢çš„ä¸œè¥¿æ‰‹åŠ¨å–å‡ºæ¥ï¼Œå› ä¸º<code>backsmali.jar</code>å·¥å…·è¦ç”¨åˆ°è¿™äº›ä¸œè¥¿ï¼Œ<code>-d</code>åé¢çš„å‚æ•°å°±æ˜¯<code>framework</code>æ–‡ä»¶å¤¹çš„è·¯å¾„
æ¯”å¦‚ï¼š
æˆ‘å½“å‰æ–‡ä»¶å¤¹çš„æ–‡ä»¶æ ‘ï¼š</li></ul><pre tabindex=0><code>.
â”œâ”€â”€ dexdump-1196412000.odex
â”œâ”€â”€ dexdump-1196414688.odex
â”œâ”€â”€ dexdump-1197778512.odex
â””â”€â”€ system
    â””â”€â”€ framework
        â”œâ”€â”€ am.jar
        â”œâ”€â”€ am.odex
        ...
        â”œâ”€â”€ wm.jar
        â””â”€â”€ wm.odex
</code></pre><p>okï¼Œoutæ–‡ä»¶å¤¹ä¸‹å·²ç»æ˜¯è¾“å‡ºçš„smaliæ–‡ä»¶äº†ï¼Œ</p><p>ç”¨<code>smali.jar</code>è½¬æˆdexæ–‡ä»¶</p><pre tabindex=0><code> java -jar E:\toolBox\smali_JesusFreke\smali-2.2.2.jar assemble -a 19 .\out\
</code></pre><p>ç”¨jadxå¼€å¼€è¯•è¯•</p><p><img src=/images/blog/40_5.png alt=jadxæŸ¥çœ‹ç”Ÿæˆçš„dexæ–‡ä»¶></p><p>å¥½æ¿€åŠ¨å•Šï¼ï¼ï¼å¯ç®—æ˜¯å¹¸è‹¦æ²¡æœ‰ç™½è´¹</p><h3 id=æ”¹application>æ”¹Application</h3><p>æŠŠdexå¡«å›åŸæ¥çš„apké‡Œé¢å»ï¼Œå†ç”¨<code>apktool</code>åç¼–è¯‘ï¼Œä¿®æ”¹<code>AndroidManifest.xml</code>é‡Œé¢çš„<code>Application</code>å­—æ®µ</p><p>å›ç¼–è¯‘æ—¶å‡ºç°errorï¼Œæœ€åä¸€å¥æ˜¯</p><pre tabindex=0><code>W: E:\toolBox\resource\dumped\com.imlk.BlackAndWhite\unsigned\res\layout-v26\abc_screen_toolbar.xml:5: error: No resource identifier found for attribute &#39;keyboardNavigationCluster&#39; in package &#39;android&#39;
W:
</code></pre><p>çœ‹çœ‹<code>apktool</code>çš„<code>help</code></p><pre tabindex=0><code>usage: apktool b[uild] [options] &lt;app_path&gt;
 -f,--force-all          Skip changes detection and build all files.
 -o,--output &lt;dir&gt;       The name of apk that gets written. Default is dist/name.apk
 -p,--frame-path &lt;dir&gt;   Uses framework files located in &lt;dir&gt;.
</code></pre><p>å°è¯•ç€ç”¨<code>-p</code>æŒ‡å®š<code>framework</code>æ–‡ä»¶å¤¹ï¼š</p><pre tabindex=0><code>java -jar E:\toolBox\apktool\apktool_2.3.1.jar b -p system\framework unsigned
</code></pre><p>å±…ç„¶æˆåŠŸäº†ï¼
ç­¾å</p><h3 id=å»é™¤stubapp>å»é™¤<code>StubApp</code></h3><p>åˆå´©äº†</p><pre tabindex=0><code>04-30 02:30:34.604 3999-3999/com.imlk.BlackAndWhite E/AndroidRuntime: FATAL EXCEPTION: main
    Process: com.imlk.BlackAndWhite, PID: 3999
    java.lang.NoClassDefFoundError: com.stub.StubApp
        at com.imlk.BlackAndWhite.MainActivity.&lt;clinit&gt;(Unknown Source)
        at java.lang.Class.newInstanceImpl(Native Method)
        at java.lang.Class.newInstance(Class.java:1208)
...
</code></pre><p>çœ‹æ¥æœ‰äº›ä¸œè¥¿æ²¡æ¸…ç†å¹²å‡€</p><p>å¤§æ•°å­—å¾€é‡Œé¢åŠ äº†é™æ€ä»£ç å—å•Š</p><p>åœ¨jadxé‡Œå…¨å±€æœç´¢<code>StubApp</code>ï¼Œå»æ–‡ä»¶é‡Œæ³¨é‡Šæ‰</p><h3 id=nativeçš„oncreateæ–¹æ³•>nativeçš„onCreateæ–¹æ³•</h3><pre tabindex=0><code>04-30 02:35:41.484 4151-4151/com.imlk.BlackAndWhite E/AndroidRuntime: FATAL EXCEPTION: main
    Process: com.imlk.BlackAndWhite, PID: 4151
    java.lang.UnsatisfiedLinkError: Native method not found: com.imlk.BlackAndWhite.MainActivity.onCreate:(Landroid/os/Bundle;)V
        at com.imlk.BlackAndWhite.MainActivity.onCreate(Native Method)
        at android.app.Activity.performCreate(Activity.java:5231)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1087)
</code></pre><p>å“‡ï¼Œæ²¡æƒ³åˆ°è¿™ä¸ª<code>onCreate</code>æ–¹æ³•å±…ç„¶æ˜¯<code>native</code>çš„ï¼ï¼ï¼
çš®ä¸‡æ–¤ï¼</p><p>çœ‹åˆ°åº”ç”¨é‡Œä¸¤ä¸ª<code>Activity</code>é‡Œé¢ä¸Šä¸€æ­¥çš„é™æ€ä»£ç å—æœ‰ä¸€ç‚¹åŒºåˆ«</p><pre tabindex=0><code>    static {
        StubApp.interface11(0);
    }
</code></pre><p>å’Œ</p><pre tabindex=0><code>    static {
        StubApp.interface11(1);
    }
</code></pre><p>çŒœæµ‹æ˜¯æ ¹æ®å‚æ•°å€¼æ¥è¯†åˆ«æ˜¯å“ªä¸ª<code>Activity</code>çš„</p><p>çœ‹çœ‹æˆ‘ä»¬dumpå‡ºæ¥çš„å…¶å®ƒdex</p><p>å“‡ï¼Œç®€ç›´å´©æºƒã€‚ã€‚ã€‚åšä¸æ¥åšä¸æ¥</p><h3 id=å‘Šä¸€æ®µè½>å‘Šä¸€æ®µè½</h3><p>æ‰€ä»¥è¯´å®Œå…¨å¤åŸæˆ‘æ˜¯æä¸æ¥äº†ï¼Œä¸è¿‡ä»…ä»…æ˜¯çœ‹çœ‹æºç è¿˜æ˜¯èƒ½çš„</p><p>èƒ½åŠ›æœ‰é™å•Šï¼Œæä¸äº†ï¼Œè¿˜æ˜¯å…ˆç»§ç»­å­¦ä¹ å§ã€‚ã€‚ã€‚ã€‚</p><p>2018_04_30</p><h3 id=å°æ’æ›²>å°æ’æ›²</h3><p>ç¼–è¯‘åå®‰è£…åœ¨<code>Android4.4</code>ä¸Šæ—¶å¶é‡è¿™ä¸ªé—®é¢˜ï¼Œ
å®‰è£…ä¸Šä»¥åï¼ŒXposedInstallerç›´æ¥å°±å´©æºƒäº†ï¼Œçœ‹æ—¥å¿—ä¹Ÿä¸€å¤´é›¾æ°´ï¼Œä¸Šç½‘æœæ‰çŸ¥é“æ˜¯æ¨¡å—çš„<code>versionCode</code>å’Œ<code>versionName</code>æ²¡æœ‰è®¾ç½®ï¼Œåœ¨<code>gradle.build</code>é‡ŒåŠ ä¸Šå°±å¥½äº†ã€‚</p><pre tabindex=0><code>04-29 09:29:04.538 5603-5619/de.robv.android.xposed.installer E/AndroidRuntime: FATAL EXCEPTION: RepositoryReload
    Process: de.robv.android.xposed.installer, PID: 5603
    android.database.sqlite.SQLiteConstraintException: installed_modules.version_name may not be NULL (code 19)
        at android.database.sqlite.SQLiteConnection.nativeExecuteForLastInsertedRowId(Native Method)
        at android.database.sqlite.SQLiteConnection.executeForLastInsertedRowId(SQLiteConnection.java:782)
        at android.database.sqlite.SQLiteSession.executeForLastInsertedRowId(SQLiteSession.java:788)
        at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:86)
        at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1469)
        at android.database.sqlite.SQLiteDatabase.insertOrThrow(SQLiteDatabase.java:1365)
        at de.robv.android.xposed.installer.repo.RepoDb.insertInstalledModule(RepoDb.java:374)
        at de.robv.android.xposed.installer.util.ModuleUtil.getInstance(ModuleUtil.java:52)
        at de.robv.android.xposed.installer.XposedApp.updateProgressIndicator(XposedApp.java:114)
        at de.robv.android.xposed.installer.util.RepoLoader$2.run(RepoLoader.java:210)
</code></pre><h3 id=å‚è€ƒèµ„æ–™>å‚è€ƒèµ„æ–™</h3><p>- Androidä¸­Xposedæ¡†æ¶ç¯‡&mdash;åŸºäºXposedçš„ä¸€æ¬¾è„±å£³ç¥å™¨ZjDroidå·¥å…·åŸç†è§£æï¼š
<a href=https://blog.csdn.net/jiangwei0910410003/article/details/52840602>https://blog.csdn.net/jiangwei0910410003/article/details/52840602</a>
- [åŸåˆ›]å®‰å“é€†å‘ä¹‹åŸºäºXposed-ZjDroidè„±å£³ï¼š
<a href=https://bbs.pediy.com/thread-218798.htm>https://bbs.pediy.com/thread-218798.htm</a>
- ZjDroidé¡¹ç›®æºç ï¼ˆå·²ç»åœæ›´4å¹´ï¼‰ï¼š
<a href=https://github.com/halfkiss/ZjDroid>https://github.com/halfkiss/ZjDroid</a>
- HeyGirlé¡¹ç›®åœ°å€
<a href=https://github.com/mikusjelly/HeyGirl>https://github.com/mikusjelly/HeyGirl</a>
- android amå‘½ä»¤ç”¨æ³•ï¼š
<a href=https://blog.csdn.net/u010164190/article/details/72875865>https://blog.csdn.net/u010164190/article/details/72875865</a>
- [åŸåˆ›]360åŠ å›ºé€†å‘è„±å£³ä¹‹è¿‡åè°ƒè¯•ï¼š
<a href=https://bbs.pediy.com/thread-213214.htm>https://bbs.pediy.com/thread-213214.htm</a>
- [åŸåˆ›]360åŠ å›ºé€†å‘è„±å£³ä¹‹è¿‡åè°ƒè¯•&ndash;åç»­ï¼š
<a href=https://bbs.pediy.com/thread-213377.htm>https://bbs.pediy.com/thread-213377.htm</a>
- 360åŠ å›ºä¿åŠ¨æ€è„±å£³ï¼š
<a href=https://www.cnblogs.com/2014asm/p/4104456.html>https://www.cnblogs.com/2014asm/p/4104456.html</a>
- JesusFreke smali:
<a href=https://bitbucket.org/JesusFreke/smali/downloads/>https://bitbucket.org/JesusFreke/smali/downloads/</a></p></main><div id=comments><hr><script src=//geoip-js.com/js/apis/geoip2/v2.1/geoip2.js type=text/javascript></script><script>var onSuccess=function(e){var t=e.country.names["zh-CN"],n=e.country.iso_code;if(!n)return;t&&(document.getElementById("comments-blocked-country-code").innerHTML=t),n=="CN"&&(document.getElementById("comments-shown").style.display="none",document.getElementById("comments-blocked").style.display="")},onError=function(){};geoip2.country(onSuccess,onError)</script><div id=comments-blocked style=font-style:italic;color:#777;display:none>è¯„è®ºåŒºå·²å…³é—­ã€‚<span style=float:right>æ¥è‡ª <span id=comments-blocked-country-code>unknown</span> çš„è®¿å®¢
<span>&nbsp; - powered by: geoip-js.com</span></span></div><div id=comments-shown><script src=https://utteranc.es/client.js repo=imlk0/imlk0.github.io issue-term=pathname label='ğŸ’¬ comments ğŸ’¬' theme=github-light crossorigin=anonymous async></script></div></div><footer class=footer><hr>Â© imlk 2017 &ndash; 2023 | <a href=https://blog.imlk.top>imlk's blog</a> | <a href=https://github.com/imlk0/>Github</a> | <a href=mailto:me@imlk.top>Email</a> | <a href=https://beian.miit.gov.cn/>äº¬ICPå¤‡2020042968å·-1</a></footer></body></html>