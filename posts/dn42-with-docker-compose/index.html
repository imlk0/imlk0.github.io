<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>åœ¨Docker Composeä¸­éƒ¨ç½²ä½ çš„DN42èŠ‚ç‚¹ | imlk's blog</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel=stylesheet></head><body><header class=header><a class=logo href=/>imlk's Blog</a><nav><ul class=menu><li><a href=/>ğŸ Home</a></li><li><a href=/about/>ğŸ‘‹About</a></li><li><a href=/archives/>ğŸ“œArchives</a></li><li><a href=/friends/>ğŸ”—Friends</a></li><li><a href=/dn42/>ğŸ•¸ï¸DN42</a></li><li><a href=/index.xml>ğŸ“¢Subscribe</a></li></ul></nav></header><hr><div class=article-meta><h1><span class=title>åœ¨Docker Composeä¸­éƒ¨ç½²ä½ çš„DN42èŠ‚ç‚¹</span></h1><span><span class=date>2022-02-23</span>
<span class=date>(æ›´æ–°äº2022-08-22)</span>
/
<span class=cats><a href=https://blog.imlk.top/categories/network/>Network</a></span>
/
<span class=tags><a href=https://blog.imlk.top/tags/dn42/>#DN42</a>
<a href=https://blog.imlk.top/tags/bgp/>#BGP</a>
<a href=https://blog.imlk.top/tags/docker/>#Docker</a></span></span><br></div><main><p>å…¶å®è¿™ç¯‡æ–‡ç« æ”’äº†å¾ˆä¹…ä¸€ç›´æ²¡æœ‰å†™ï¼Œå…¶ä¸­ä¸€ä¸ªåŸå› æ˜¯DN42çš„å…¥é—¨æ•™ç¨‹å¤ªå¤šäº†ï¼Œå†å‘ä¹Ÿå°±é‡å¤äº†ã€‚ä½†æ˜¯åˆå¾ˆæƒ³å†™ç‚¹ä¸œè¥¿æ¯•ç«Ÿè¿™ä¸ªä¹ŸæŠ˜è…¾äº†ä¸€æ®µæ—¶é—´ï¼Œäºæ˜¯åœ¨æŸä¸ªå¤œæ·±äººé™çš„å¤œæ™šï¼Œ<del>ä¸æƒ³å¹²æ´»</del>æ— æ‰€äº‹äº‹çš„æˆ‘å†³å®šæ•´ç†ä¸€ä¸‹æ°´ä¸€ç¯‡:)ã€‚</p><h1 id=åˆè§dn42>åˆè§DN42</h1><p>æˆ‘å¤§æ¦‚æ˜¯å»å¹´å†¬å¤©çš„æ—¶å€™å…¥å‘äº†DN42ï¼Œä¸»è¦æ˜¯çœ‹MiaoTonyå’ŒLan Tiançš„blogå»æ³¨å†Œã€‚ç„¶åç”±äºå½“æ—¶å—åˆ°æŸä½å¥½å‹çš„ã€ŒAll in docker-compose.yamlã€æ–‡åŒ–çš„æ„ŸæŸ“ï¼Œæˆ‘èŒç”Ÿäº†æŠŠDN42çš„æœåŠ¡ç”¨docker-composeè„šæœ¬å»å®šä¹‰çš„æƒ³æ³•ã€‚</p><h1 id=dn42-with-docker-compose>DN42 with docker-compose</h1><p>åŸºäºdocker-composeæœ‰è¿™ä¹ˆä¸€äº›å¥½å¤„ï¼š</p><ol><li>å®‰å…¨æ€§ã€‚é€šå¸¸æ¥è¯´ï¼Œdn42æ•™ç¨‹é‡Œä¼šéœ€è¦ä½ åœ¨ä¸»æœºä¸Šæ‰§è¡ŒåŒ…æ‹¬å…³é—­é˜²ç«å¢™ä¹‹ç±»çš„æ“ä½œã€‚ä½¿ç”¨docker-composeæ–¹æ¡ˆå¯ä»¥é¿å…è¿™ä¸€é—®é¢˜ï¼ŒåŒæ—¶å°†ä¸»æœºä¸Šçš„å…¶å®ƒç§æœ‰æœåŠ¡ä¸dn42ç½‘ç»œåšéš”ç¦»ã€‚</li><li>æ–¹ä¾¿æ‰©å±•dn42èŠ‚ç‚¹ã€‚åªéœ€è¦rsyncåˆ°æ–°çš„æœºå™¨ä¸Šï¼Œæ”¹æ”¹é…ç½®å°±èƒ½å¼€ä¸€ä¸ªæ–°çš„Route Serverã€‚</li><li>é…ç½®é”™è¯¯åéšæ—¶remakeã€‚<code>docker down && docker up</code>åˆæ˜¯å…¨æ–°çš„ä¸€å¤©ã€‚</li><li>å¯ä»¥åœ¨docker-compose.yamlé‡Œç›´æ¥å®Œæˆipåœ°å€çš„é™æ€åˆ†é…ï¼Œç»“åˆ<a href=https://docs.docker.com/compose/compose-file/#ipam>IPAM</a>ï¼Œå¯ä»¥ä¸ºä¸åŒçš„Route Serveråˆ’åˆ†åœ°å€æ®µã€‚</li></ol><p>ä¹Ÿæœ‰è¿™ä¹ˆä¸€äº›ç¼ºç‚¹ï¼š</p><ol><li>ç½‘ç»œå˜å¾—å¤æ‚ï¼šæˆ‘ä»¬çš„è®¾æƒ³æ˜¯æŠŠåœ¨dockerä¸­å®šä¹‰ä¸€ä¸ªbridgeç½‘ç»œï¼Œæ‰€æœ‰çš„bgpã€dnsã€lookingglassç­‰dn42æœåŠ¡å…¨éƒ¨æŒ‚åˆ°è¿™ä¸ªbridgeç½‘ç»œä¸Šã€‚</li><li>æœ‰ä¸€äº›å‘ï¼šå½“ç„¶æˆ‘åŸºæœ¬ä¸Šéƒ½å¸®ä½ å¡«å¥½äº†ã€‚</li></ol><p>é‚£ä¹ˆè¯ä¸å¤šè¯´ï¼Œæˆ‘å°†ä»£ç æ”¾å…¥åˆ°äº†è¿™ä¸ªä»“åº“é‡Œ ğŸ‘‰ <a href=https://github.com/KB5201314/dn42-stuffs>dn42-stuffs</a></p><p>ç”±äºæ¯ä¸ªäººçš„å£å‘³ä¸åŒï¼Œå»ºè®®æ‚¨cloneä¸‹æ¥ä¹‹åæŒ‰ç…§è‡ªå·±çš„æ„æ„¿å»ä¿®æ”¹</p><blockquote><p>å¯¹äº†æˆ‘çš„ASNæ˜¯<code>4242421742</code>ï¼Œæ¬¢è¿è”ç³»æˆ‘peerï¼ˆå¤ªæ‡’äº†æ²¡å†™è‡ªåŠ¨peeræœåŠ¡ï¼Œè¦æ˜¯æœ‰äººæèµ ä¸€ä¸ªPull Requestç»™å’±å°±å¥½äº†ï¼‰</p></blockquote><h1 id=ä¸€äº›æ’é”™ç»éªŒ>ä¸€äº›æ’é”™ç»éªŒ</h1><h2 id=ä½¿ç”¨ip6tablesè¿½è¸ªæ•°æ®åŒ…>ä½¿ç”¨ip6tablesè¿½è¸ªæ•°æ®åŒ…</h2><h3 id=è®¾ç½®è¿½è¸ª>è®¾ç½®è¿½è¸ª</h3><p>å¯ä»¥ç›´æ¥å‚è€ƒ<a href=https://sleeplessbeastie.eu/2020/11/13/how-to-trace-packets-as-they-pass-through-the-firewall/>è¿™ç¯‡æ–‡ç« </a>ï¼Œåœ¨rawè¡¨ä¸Šçš„<code>PREROUTING</code>æˆ–è€…<code>OUTPUT</code>è¡¨ä¸Šè®¾ç½®<code>-j TRACE</code>ã€‚</p><p>æ¯”å¦‚ä¸‹é¢æ˜¯è¿½è¸ªè¿›å…¥åˆ°è¯¥ä¸»æœºçš„icmpv6åŒ…ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>ip6tables -t raw -A PREROUTING -p icmpv6 -j TRACE
</span></span></code></pre></div><h3 id=æŸ¥çœ‹è¿½è¸ªæ—¥å¿—>æŸ¥çœ‹è¿½è¸ªæ—¥å¿—</h3><p>æ—§ç‰ˆå†…æ ¸é€šå¸¸ä½¿ç”¨<code>modprobe ipt_LOG</code>ï¼Œä¾‹å¦‚<a href=https://www.opsist.com/blog/2015/08/11/how-do-i-see-what-iptables-is-doing.html>è¿™é‡Œ</a>æ‰€ä»‹ç»çš„ã€‚</p><p>ä½†æ˜¯ç”±äºåšä¸»çš„kernelæ¯”è¾ƒæ–°ï¼Œç°åœ¨ä½¿ç”¨<code>nf_log_*</code>ç³»åˆ—æ¨¡å—ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>modprobe nf_log_ipv6
</span></span><span style=display:flex><span>sysctl net.netfilter.nf_log.10<span style=color:#f92672>=</span>nf_log_ipv6
</span></span></code></pre></div><p>éœ€è¦æ³¨æ„çš„æ˜¯<code>nf_log.</code>åé¢çš„æ•°å­—å®é™…ä¸Šå¯¹åº”ç€åè®®ç¼–å·ï¼Œå…·ä½“å€¼æ˜¯å–å†³äºä»£ç ä¸­å®šä¹‰çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³è§‚å¯Ÿçš„ipv6åè®®å¯¹åº”<code>AF_INET6</code>çš„å€¼ä¸º<code>10</code>ï¼Œè€Œipv4å¯¹åº”çš„<code>AF_INET</code>å€¼ä¸º2ã€‚è¿™ä¸‹netfiliteræ¡†æ¶ä¼šå°†traceæ‰“å°åˆ°å†…æ ¸æ¶ˆæ¯ä¸­ã€‚</p><p>æŸ¥çœ‹æ—¥å¿—<a href=https://www.opensourcerers.org/2016/05/27/how-to-trace-iptables-in-rhel7-centos7/>ä¸€èˆ¬çš„æ–¹æ³•</a>éƒ½æ˜¯å…ˆé…ç½®<code>rsyslog</code>è¾“å‡ºæ—¥å¿—ï¼Œç„¶åå»çœ‹<code>kern.*</code>è¢«è¾“å‡ºåˆ°çš„åœ°æ–¹ï¼Œä¹Ÿæœ‰ç›´æ¥ç”¨<code>dmesg</code>æŸ¥çœ‹çš„ã€‚ä½†æ˜¯æµ‹è¯•å‘ç°å¹¶ä¸ç®¡ç”¨ï¼ŒçŒœæµ‹æ˜¯netnséš”ç¦»çš„åŸå› ã€‚</p><p>æœ€ååœ¨<a href=https://wiki.nftables.org/wiki-nftables/index.php/Ruleset_debug/tracing>nftableså®˜æ–¹æ–‡æ¡£</a>è¿™é‡Œæ‰¾åˆ°å¦ä¸€ç§æ–¹æ³•æ¥æŸ¥çœ‹ï¼š</p><p>é¦–å…ˆå¿…é¡»ç¡®ä¿å½“å‰çš„shellå¤„åœ¨ä¸Šé¢æ‰§è¡Œ<code>ip6table</code>æ—¶åŒä¸€ä¸ªnetnsé‡Œé¢ï¼Œå¦åˆ™çœ‹ä¸åˆ°æ—¥å¿—ã€‚</p><p>ç„¶åä½¿ç”¨nftablesæŸ¥çœ‹traceè®°å½•ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>nft monitor trace
</span></span></code></pre></div><p>å°±ä¼šæ˜¾ç¤ºå‡º<code>-j TRACE</code>çš„è®°å½•ã€‚</p><h2 id=æ’é”™è¿‡ç¨‹ä¸€>æ’é”™è¿‡ç¨‹ä¸€</h2><p>è¿›è¡Œä¸€æ¬¡ä»<code>fd42:d2aa:8a0e::3</code> ä¸»æœºAåˆ° ipä¸º<code>fd42:d42:d42:54::1</code>çš„ç›®æ ‡Tçš„ping6ã€‚å…¶ä¸­ç½‘å…³Gçš„ipä¸º<code>fd42:d2aa:8a0e::2</code>ã€‚</p><p>ä¸»æœºAå’Œç½‘å…³Gå‡ä¸ºdocker containerã€‚</p><p>ç°è±¡æ˜¯ï¼šecho-requeståŒ…åˆ°è¾¾ç½‘å…³Gåå¹¶æ²¡æœ‰è¢«è½¬å‘å‡ºæ¥ã€‚å¹¶ä¸”<strong>ä»»ä½•æ¥æºçš„ipv6åŒ…ç½‘å…³Géƒ½ä¸åšè½¬å‘</strong>ã€‚</p><p>åœ¨ç½‘å…³Gçš„netnsä¸­ä½¿ç”¨iptablesè®¾ç½®è¿½è¸ªï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>ip6tables -t raw -A PREROUTING -p icmpv6 --destination fd42:d42:d42:54::1 -j TRACE
</span></span></code></pre></div><p>è¿½è¸ªæ—¥å¿—å¦‚ä¸‹ï¼š</p><pre tabindex=0><code>trace id e4a36c57 ip6 raw PREROUTING packet: iif &#34;eth0&#34; ether saddr 02:42:ac:16:60:03 ether daddr 02:42:ac:16:60:02 ip6 saddr fd42:d2aa:8a0e::3 ip6 daddr fd42:d42:d42:54::1 ip6 dscp cs0 ip6 ecn not-ect ip6 hoplimit 64 ip6 flowlabel 668322 ip6 length 64 icmpv6 type echo-request icmpv6 code no-route icmpv6 parameter-problem 27197440 @th,64,96 13911993890790384138924851200 
trace id e4a36c57 ip6 raw PREROUTING rule meta l4proto ipv6-icmp ip6 daddr fd42:d42:d42:54::1 counter packets 19226 bytes 1999504 meta nftrace set 1 (verdict continue)
trace id e4a36c57 ip6 raw PREROUTING verdict continue 
trace id e4a36c57 ip6 raw PREROUTING policy accept 
</code></pre><p>æ˜¾ç¤ºpacketåˆ°<code>PREROUTING</code>ä¹‹åå°±æ¶ˆå¤±äº†ï¼Œ<a href=https://unix.stackexchange.com/questions/690999/ipv6-forwarding-doesnt-work-in-a-network-namespace>æŸ¥é˜…èµ„æ–™</a>å‘ç°ï¼Œsysctlçš„<code>net.*</code>æ˜¯èƒ½å¤Ÿæ„ŸçŸ¥netnsï¼ˆnetwork-namespace awareï¼‰çš„ï¼Œè€Œ<strong>åœ¨åˆ›å»ºcontainerçš„netnsæ—¶ï¼Œ<code>net.ipv6.conf.all.forwarding=1</code>è®¾ç½®å¹¶æœªä»init_netç»§æ‰¿</strong>ï¼ˆè¯¥è¡Œä¸ºç”±<a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/tree/Documentation/admin-guide/sysctl/net.rst?h=v5.8#n332">net.core.devconf_inherit_init_net</a>æ§åˆ¶ï¼‰ï¼Œå› æ­¤éœ€è¦åœ¨ç½‘å…³Gå®¹å™¨ä¸­é¢å¤–è®¾ç½®å¼€å¯ipv6çš„forwardingï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sysctl -w net.ipv6.conf.all.forwarding<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>è®¾ç½®å®Œæˆåé€šè¿‡tcpdumpå‘ç°ï¼Œecho-requestè¢«å‘å‡ºå¹¶ä¸”ç›®æ ‡Tè¿”å›çš„echo-replyæŠµè¾¾ç½‘å…³Gã€‚</p><h2 id=æ’é”™è¿‡ç¨‹äºŒ>æ’é”™è¿‡ç¨‹äºŒ</h2><p>ä¸Šé¢çš„é—®é¢˜è§£å†³åï¼Œecho-replyæŠµè¾¾äº†ç½‘å…³Gï¼Œä½†æ˜¯å¦ä¸€ä¸ªé—®é¢˜æ˜¯echo-replyå¹¶æ²¡æœ‰è¢«è½¬å‘ç»™ä¸»æœºAã€‚</p><p>æµ‹è¯•å‘ç°<strong>ä»»ä½•å¤–é¢çš„DN42ä¸»æœºçš„åŒ…éƒ½æ— æ³•è¿›æ¥ï¼Œç®€å•æ¥è¯´ï¼šåªå‡ºä¸è¿›ã€‚</strong></p><p>åœ¨ç½‘å…³Gä¸Šè®¾ç½®rawè¡¨ä¸ŠPREROUTINGçš„traceï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>ip6tables -t raw -A PREROUTING -p icmpv6 --destination fd42:d2aa:8a0e::3 -j TRACE
</span></span></code></pre></div><p>ç»“æœæ˜¾ç¤ºecho-replyæ–­åœ¨äº†rawè¡¨çš„PREROUTINGé“¾ä¸Šï¼š</p><pre tabindex=0><code>trace id c9fb2605 ip6 raw PREROUTING packet: iif &#34;wg-4242422688&#34; ip6 saddr fd42:d42:d42:54::1 ip6 daddr fd42:d2aa:8a0e::3 ip6 dscp cs0 ip6 ecn not-ect ip6 hoplimit 62 ip6 flowlabel 808330 ip6 length 64 icmpv6 type echo-reply icmpv6 code no-route icmpv6 parameter-problem 11339418 @th,64,96 62617626364244974739948306432 
trace id c9fb2605 ip6 raw PREROUTING rule meta l4proto ipv6-icmp ip6 daddr fd42:d2aa:8a0e::3 counter packets 17107 bytes 1779128 meta nftrace set 1 (verdict continue)
trace id c9fb2605 ip6 raw PREROUTING rule ip6 daddr fd42:d2aa:8a0e::3 counter packets 15984 bytes 1656726 meta nftrace set 1 (verdict continue)
trace id c9fb2605 ip6 raw PREROUTING rule meta l4proto ipv6-icmp ip6 daddr fd42:d2aa:8a0e::3 counter packets 7 bytes 728 meta nftrace set 1 (verdict continue)
trace id c9fb2605 ip6 raw PREROUTING verdict continue 
trace id c9fb2605 ip6 raw PREROUTING policy accept 
</code></pre><p>ä½†æ˜¯netnsä¸­çš„é˜²ç«å¢™è§„åˆ™å¹¶æœªæ‹¦æˆªï¼Œå¹¶ä¸”traceä¹Ÿæ²¡æœ‰æ˜¾ç¤ºå“ªä¸€æ¡è§„åˆ™dropäº†è¿™ä¸ªpacketã€‚</p><p>æ’æŸ¥åå‘ç°åŸå› æ˜¯ä¸»æœºAå’Œç½‘å…³Gå‡ä¸ºdocker containerï¼Œå®ƒä»¬ä¹‹é—´çš„ç½‘ç»œç»ç”±dockerä¸»æœºä¸Šçš„bridgeç›¸è¿ï¼Œå› æ­¤è¿˜å—åˆ°dockerä¸»æœºä¸Šé˜²ç«å¢™çš„å½±å“ã€‚</p><p>åœ¨dockerä¸»æœºä¸Štraceï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>ip6tables -t raw -A PREROUTING -p icmpv6 --destination fd42:d2aa:8a0e::3 -j TRACE
</span></span></code></pre></div><pre tabindex=0><code>trace id 698de359 ip6 raw PREROUTING packet: iif &#34;br-94f3521ab04f&#34; ether saddr 02:42:ac:16:60:02 ether daddr 02:42:ac:16:60:03 ip6 saddr fd42:d42:d42:54::1 ip6 daddr fd42:d2aa:8a0e::3 ip6 dscp cs0 ip6 ecn not-ect ip6 hoplimit 61 ip6 flowlabel 808330 ip6 length 64 icmpv6 type echo-reply icmpv6 code no-route icmpv6 parameter-problem 11339711 @th,64,96 4913746139972088583361134592 
trace id 698de359 ip6 raw PREROUTING rule meta l4proto ipv6-icmp ip6 daddr fd42:d2aa:8a0e::3 counter packets 2 bytes 176 meta nftrace set 1 (verdict continue)
trace id 698de359 ip6 raw PREROUTING verdict continue 
trace id 698de359 ip6 raw PREROUTING policy accept 
trace id 698de359 inet firewalld raw_PREROUTING packet: iif &#34;br-94f3521ab04f&#34; ether saddr 02:42:ac:16:60:02 ether daddr 02:42:ac:16:60:03 ip6 saddr fd42:d42:d42:54::1 ip6 daddr fd42:d2aa:8a0e::3 ip6 dscp cs0 ip6 ecn not-ect ip6 hoplimit 61 ip6 flowlabel 808330 ip6 nexthdr ipv6-icmp ip6 length 64 icmpv6 type echo-reply icmpv6 code no-route icmpv6 parameter-problem 11339711 @th,64,96 4913746139972088583361134592 
trace id 698de359 inet firewalld raw_PREROUTING rule meta nfproto ipv6 fib saddr . iif oif missing drop (verdict drop)
</code></pre><p>ç»“æœæ˜¾ç¤ºæ–­åœ¨äº†<strong>dockerä¸»æœºä¸Šfirewalldé˜²ç«å¢™çš„ä¸€æ¡è§„åˆ™</strong>ä¸Šï¼Œä½¿ç”¨nftæŸ¥çœ‹è¿™æ¡è§„åˆ™ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo nft list chain inet firewalld raw_PREROUTING;
</span></span></code></pre></div><pre tabindex=0><code>table inet firewalld {
        chain raw_PREROUTING {
                type filter hook prerouting priority raw + 10; policy accept;
                icmpv6 type { nd-router-advert, nd-neighbor-solicit } accept
                meta nfproto ipv6 fib saddr . iif oif missing drop
        }
}
</code></pre><p>ï¼ˆæ²¡æƒ³åˆ°hostä¸»æœºä¸Šçš„é˜²ç«å¢™ä¼šä½œç”¨åœ¨dockerçš„bridgeç½‘ç»œä¸Šï¼‰</p><p>å…³é”®åœ¨äºé‚£è¡Œ<code>drop</code>è¯­å¥ï¼Œæ˜¯å¯¹ipv6æ•°æ®åŒ…çš„æ¥æºåœ°å€è¿›è¡Œåå‘æ£€æŸ¥ï¼Œæ£€æŸ¥å½“å‰è¿™ä¸ªåŒ…çš„æ¥æºåœ°å€æ˜¯å¦å’Œï¼Œå›å¤è¯¥åœ°å€æ—¶çš„interfaceä¸€è‡´ã€‚</p><p>è¯¥è¡Œä¸ºæ˜¯<code>/etc/firewalld/firewalld.conf</code>çš„<a href=https://firewalld.org/documentation/configuration/firewalld-conf.html>IPv6_rpfilter/etc/firewalld/firewalld.confé€‰é¡¹</a>æ§åˆ¶çš„ï¼Œéœ€è¦å°†å…¶æ”¹ä¸ºï¼š</p><pre tabindex=0><code>IPv6_rpfilter=no
</code></pre><p>å¯¹äºnftablesçš„æ›´å¤šä½¿ç”¨æ–¹æ³•ä»¥åŠæ¦‚å¿µå­¦ä¹ ï¼Œæ¨èçœ‹RedHatçš„<a href=https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/8/html/configuring_and_managing_networking/getting-started-with-nftables_configuring-and-managing-networking>è¿™ä»½æ–‡æ¡£</a>ã€‚</p><h1 id=å‚è€ƒæ–‡æ¡£>å‚è€ƒæ–‡æ¡£</h1><ul><li><a href=https://home.regit.org/2014/02/nftables-and-netfilter-logging-framework/>Nftables and the Netfilter logging framework</a></li><li><a href=https://wiki.nftables.org/wiki-nftables/index.php>nftables wiki</a></li><li><a href=https://tldp.org/HOWTO/Linux+IPv6-HOWTO/ch18s05.html>TLDP - Linux IPv6 HOWTO (en) - Firewalling using nftables</a></li></ul></main><div id=comments><hr><script src=https://utteranc.es/client.js repo=KB5201314/KB5201314.github.io issue-term=pathname label='ğŸ’¬ comments ğŸ’¬' theme=github-light crossorigin=anonymous async></script></div><footer><hr>Â© imlk 2017 &ndash; 2021 | <a href=https://blog.imlk.top>imlk's blog</a> | <a href=https://github.com/KB5201314/>Github</a> | <a href=mailto:me@imlk.top>Email</a> | <a href=https://beian.miit.gov.cn/>äº¬ICPå¤‡ - 2020042968å·</a></footer></body></html>