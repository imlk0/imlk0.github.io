<!doctype html><html lang=zh-cn>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Codeforces Contest 1005 E2. Median on Segments (General Case Edition) | imlk's blog</title>
<link rel=stylesheet href=/css/style.css>
<link rel=stylesheet href=/css/fonts.css>
<link rel=preconnect href=https://fonts.googleapis.com>
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel=stylesheet>
</head>
<body>
<header class=header>
<a class=logo href=/> imlk's Blog </a>
<nav>
<ul class=menu>
<li><a href=/>Home</a></li>
<li><a href=/about/>About</a></li>
<li><a href=/archives/>Archives</a></li>
<li><a href=/friends/>Friends</a></li>
<li><a href=/index.xml>Subscribe</a></li>
</ul>
</nav>
</header>
<hr>
<div class=article-meta>
<h1><span class=title>Codeforces Contest 1005 E2. Median on Segments (General Case Edition)</span></h1>
<span>
<span class=date>2018-07-11</span>
|
<span class=cats>
<a href=https://blog.imlk.top/categories/algorithm/>Algorithm</a>
</span>
|
<span class=tags>
<a href=https://blog.imlk.top/tags/codeforces/>#Codeforces</a>
</span>
</span>
<br>
</div>
<main>
<h3 id=é“¾æ¥>é“¾æ¥</h3>
<p><a href=http://codeforces.com/contest/1005/problem/E2>Codeforces Round #496 (Div. 3) - E2. Median on Segments (General Case Edition)</a></p>
<h3 id=0x00é—®é¢˜è½¬åŒ–>0x00é—®é¢˜è½¬åŒ–</h3>
<p>ä¸ºæ±‚å¾—ä¸­ä½æ•°ä¸ºmçš„æ‰€æœ‰åŒºé—´ç»„åˆï¼Œå¯ä»¥å°†é—®é¢˜è½¬åŒ–ä¸ºä¸¤ä¸ªæ›´å®¹æ˜“çš„é—®é¢˜</p>
<blockquote>
<p>â€œæ±‚&lt;ä¸­ä½æ•°ä¸ºå¤§äºç­‰äºmçš„æ•°>çš„æ‰€æœ‰ç»„åˆæ•°é‡ - &lt;ä¸­ä½æ•°ä¸ºå¤§äºç­‰äºm+1çš„æ•°>çš„æ‰€æœ‰ç»„åˆæ•°é‡â€</p>
</blockquote>
<h3 id=0x00æ±‚è§£é—®é¢˜>0x00æ±‚è§£é—®é¢˜</h3>
<p>æ±‚&lt;ä¸­ä½æ•°ä¸ºå¤§äºç­‰äºmçš„æ•°>çš„æ‰€æœ‰ç»„åˆæ•°é‡</p>
<p>ä»å·¦åˆ°å³éå†è¾“å…¥æ•°æ®ï¼Œè‹¥é‡åˆ°å¤§äºç­‰äºmçš„åˆ™+1ï¼Œå¦åˆ™-1
<strong>è‹¥æŸä¸ªåŒºé—´[a,b]ä¸­+1 -1çš„å’Œæœ€ç»ˆå¤§äº0(å³å¤§äºç­‰äºmçš„æ•°å¤šäºå°äºç­‰äºmçš„æ•°)ï¼Œåˆ™[a,b]åŒºé—´çš„ä¸­ä½æ•°å¤§äºç­‰äºm</strong></p>
<p>ç»Ÿè®¡è¿™äº›åŒºé—´çš„æ•°ç›®ï¼Œå°±æ˜¯ç­”æ¡ˆ
ä½†æ˜¯éå†åŒºé—´å¤æ‚åº¦æ˜¯n^2ï¼Œè¦è®¡ç®—æ¯ä¸€ä¸ªå­åŒºé—´çš„å’Œå€¼ï¼Œå¯ä»¥é‡‡ç”¨ç±»ä¼¼äºå‰ç¼€æ•°ç»„çš„æ€æƒ³ï¼Œ
ä½†æ˜¯è¿™æ ·æ•´ä½“çš„å¤æ‚åº¦è‡³å°‘æ˜¯n^2ï¼Œæ•°æ®é‡næœ€å¤šæ˜¯20wï¼Œå¯èƒ½ä¼šå‡ºç°TLï¼Œ</p>
<h3 id=å‚è€ƒ>å‚è€ƒ</h3>
<p><a href=http://www.cnblogs.com/widsom/p/9290269.html>http://www.cnblogs.com/widsom/p/9290269.html</a></p>
<p>ä¼˜åŒ–ï¼š
è¦ç»Ÿè®¡[a,b]å¤§äº0å‡ºç°çš„æ¬¡æ•°ï¼Œä¹Ÿå°±æ˜¯ç»Ÿè®¡â€œ[0,b]çš„å€¼ > [0,a-1]çš„å€¼â€è¿™ç§æƒ…å†µå‡ºç°çš„æ¬¡æ•°ï¼Œ
å¯ä»¥é‡‡ç”¨ä¸€æ¬¡éå†è¾“å…¥æ•°æ®ï¼Œå‡è®¾è®¿é—®åˆ°ç¬¬cä¸ªæ•°ï¼Œ<a href="k=0,1,2...c">0,k</a>å¯é‡‡ç”¨ç±»ä¼¼äºå‰ç¼€æ•°ç»„çš„æ–¹å¼è¿­ä»£è®¡ç®—ï¼Œ</p>
<p>åŒæ—¶ç”¨æ•°ç»„æˆ–mapæ¥ä¿å­˜å…ˆå‰[0,k] (k=0,1,2&mldr;c-1)çš„å€¼å‡ºç°çš„æ¬¡æ•°ï¼Œ
å°†å°äº[0,c]çš„å€¼å‡ºç°çš„æ¬¡æ•°ç›¸åŠ ï¼Œæ‰€æœ‰çš„céƒ½è¿™æ ·æ“ä½œï¼ŒåŠ èµ·æ¥çš„å°±æ˜¯ç­”æ¡ˆ
ä¸ºå°†å°äº[0,c]çš„å€¼å‡ºç°çš„æ¬¡æ•°ç›¸åŠ ï¼Œå¯ä»¥é‡‡ç”¨ç±»ä¼¼äºè«é˜Ÿç®—æ³•çš„åŠæ³•ï¼Œè¾¹ç•Œä¸€æ¬¡ç§»åŠ¨ä¸€æ ¼</p>
<p><img src=/images/blog/44_0.png alt=ä¸¾ä¾‹æŸä¸€æ—¶åˆ»çš„çŠ¶æ€></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;algorithm&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstring&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;string&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cmath&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span>
<span style=color:#66d9ef>using</span> <span style=color:#66d9ef>namespace</span> std;
<span style=color:#75715e>#define MAXN 200005
</span><span style=color:#75715e></span>
<span style=color:#66d9ef>int</span> an[MAXN];
<span style=color:#66d9ef>int</span> appear[MAXN <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>];<span style=color:#75715e>//æ•°ç»„å¼€ä¸¤å€ï¼Œä»ä¸­é—´å¼€å§‹ç”¨ä»¥æ»¡è¶³åŠ å‡
</span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> n;

<span style=color:#66d9ef>long</span> <span style=color:#66d9ef>long</span> <span style=color:#a6e22e>solve</span>(<span style=color:#66d9ef>int</span> m) {
	<span style=color:#66d9ef>int</span> count <span style=color:#f92672>=</span> n;<span style=color:#75715e>// ä½¿ç”¨æ•°ç»„ä»ä¸­é—´å¼€å§‹
</span><span style=color:#75715e></span>	appear[count]<span style=color:#f92672>++</span>;
	<span style=color:#66d9ef>long</span> <span style=color:#66d9ef>long</span> mo <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
	<span style=color:#66d9ef>long</span> <span style=color:#66d9ef>long</span> ans <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
	<span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> n; <span style=color:#f92672>++</span>i) {
		<span style=color:#66d9ef>if</span> (an[i] <span style=color:#f92672>&gt;=</span> m) {<span style=color:#75715e>// +1
</span><span style=color:#75715e></span>			mo <span style=color:#f92672>+=</span> appear[count];
			count<span style=color:#f92672>++</span>;
			appear[count]<span style=color:#f92672>++</span>;
		} <span style=color:#66d9ef>else</span> {<span style=color:#75715e>// -1
</span><span style=color:#75715e></span>			count<span style=color:#f92672>--</span>;
			mo <span style=color:#f92672>-=</span> appear[count];
			appear[count]<span style=color:#f92672>++</span>;
		}
		ans <span style=color:#f92672>+=</span> mo;
	}

	<span style=color:#66d9ef>return</span> ans;
}

<span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>(<span style=color:#66d9ef>int</span> argc, <span style=color:#66d9ef>char</span> <span style=color:#66d9ef>const</span> <span style=color:#f92672>*</span>argv[]) {

	<span style=color:#66d9ef>int</span> m;

	scanf(<span style=color:#e6db74>&#34;%d%d&#34;</span>, <span style=color:#f92672>&amp;</span>n, <span style=color:#f92672>&amp;</span>m);

	<span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> n; <span style=color:#f92672>++</span>i) {
		scanf(<span style=color:#e6db74>&#34;%d&#34;</span>, an <span style=color:#f92672>+</span> i);
	}

	<span style=color:#66d9ef>long</span> <span style=color:#66d9ef>long</span> ans <span style=color:#f92672>=</span> solve(m);
	memset(appear, <span style=color:#ae81ff>0</span>, <span style=color:#66d9ef>sizeof</span>(appear));
	ans <span style=color:#f92672>-=</span> solve(m <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>);

	printf(<span style=color:#e6db74>&#34;%lld</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, ans);



	<span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
}
</code></pre></div>
</main>
<div id=comments>
<hr>
<script src=https://utteranc.es/client.js repo=KB5201314/KB5201314.github.io issue-term=pathname label="ğŸ’¬ comments ğŸ’¬" theme=github-light crossorigin=anonymous async></script>
</div>
<footer>
<hr>
Â© imlk 2017 &ndash; 2021 | <a href=https://blog.imlk.top>imlk's blog</a> | <a href=https://github.com/KB5201314/>Github</a> | <a href=mailto:me@imlk.top>Email</a> | <a href=https://beian.miit.gov.cn/>äº¬ICPå¤‡ - 2020042968å·</a>
</footer>
</body>
</html>